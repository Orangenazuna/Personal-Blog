{
    "version": "https://jsonfeed.org/version/1",
    "title": "Trash Box",
    "subtitle": "",
    "icon": "http://kotokusunao.com/assets/favicon.ico",
    "description": "请不要在此处乱丢垃圾",
    "home_page_url": "http://kotokusunao.com",
    "items": [
        {
            "id": "http://kotokusunao.com/2024/03/20/WebsiteBuilding/Web-Problem/",
            "url": "http://kotokusunao.com/2024/03/20/WebsiteBuilding/Web-Problem/",
            "title": "网站遇到的问题及解决方法",
            "date_published": "2024-03-19T15:00:00.000Z",
            "content_html": "<h1 id=\"遇到的问题\"><a class=\"anchor\" href=\"#遇到的问题\">#</a> 遇到的问题：</h1>\n<h2 id=\"the-plain-http-request-was-sent-to-https-port\"><a class=\"anchor\" href=\"#the-plain-http-request-was-sent-to-https-port\">#</a> The plain HTTP request was sent to HTTPS port</h2>\n<p>问题解决步骤：</p>\n<ol>\n<li>\n<p><strong>问题描述：</strong> 发现访问网站时出现 400 Bad Request 错误，显示 “The plain HTTP request was sent to HTTPS port”。</p>\n</li>\n<li>\n<p><strong>检查 Nginx 配置文件：</strong> 打开 Nginx 配置文件，发现在 HTTP server 块中存在一个 rewrite 规则和 if 语句，这可能导致了错误。</p>\n</li>\n<li>\n<p><strong>备份配置文件：</strong> 在进行任何修改之前，务必备份 Nginx 配置文件，以防意外情况发生。</p>\n</li>\n<li>\n<p><strong>修改 Nginx 配置文件：</strong></p>\n<ul>\n<li>\n<p><strong>HTTP server 块中的 if 语句：</strong> 原本的 if 语句会将所有 HTTP 请求都重定向到 HTTPS，但是这样会导致直接在 HTTPS 端口上收到 HTTP 请求，从而引发 400 Bad Request 错误。因此，我们需要修改 if 语句，只有当请求的端口是 80（即 HTTP 请求）时才执行重定向到 HTTPS。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$server_port</span> <span class=\"token operator\">=</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token builtin class-name\">return</span> <span class=\"token number\">301</span> https://<span class=\"token variable\">$host</span><span class=\"token variable\">$request_uri</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p><strong>HTTP server 块中的 rewrite 规则：</strong> 原本的 rewrite 规则将所有请求都重定向到 HTTPS，但是在解决 400 Bad Request 错误的情况下，我们需要将这个重定向移除。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 移除原本的 rewrite 规则</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># rewrite ^(.*)$  https://$host$1 permanent;</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p><strong>保存并关闭配置文件：</strong> 在完成修改后，保存并关闭 Nginx 配置文件。</p>\n</li>\n<li>\n<p><strong>重启 Nginx 服务：</strong> 使用命令行工具，执行以下命令来重启 Nginx 服务：</p>\n</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>nginx <span class=\"token parameter variable\">-s</span> reload</pre></td></tr></table></figure><p>这将使新的配置文件生效。</p>\n<ol start=\"7\">\n<li><strong>测试访问：</strong> 使用浏览器访问网站，确认 400 Bad Request 错误是否已经解决。</li>\n</ol>\n<h2 id=\"usage-hexo-command-commands-help-get-help-on-a-command\"><a class=\"anchor\" href=\"#usage-hexo-command-commands-help-get-help-on-a-command\">#</a> Usage: hexo &lt;command&gt; Commands: help Get help on a command.</h2>\n<p>问题解决步骤：</p>\n<ol>\n<li>\n<p><strong>问题描述：</strong> 运行 hexo 指令出现错误。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo clean</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Usage: hexo</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Commands:</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">help</span> Get <span class=\"token builtin class-name\">help</span> on a command.</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>init Create a new Hexo folder.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>version Display version information.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>Global Options:</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>–config Specify config <span class=\"token function\">file</span> instead of using _config.yml</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>–cwd Specify the CWD</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>–debug Display all verbose messages <span class=\"token keyword\">in</span> the terminal</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>–draft Display draft posts</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>–safe Disable all plugins and scripts</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>–silent Hide output on console</pre></td></tr></table></figure></li>\n<li>\n<p><strong>疑似最近没有打开工作区域文件：</strong> 运行以下指令可以解决。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> run server</pre></td></tr></table></figure></li>\n</ol>\n",
            "tags": [
                "从零开始网站建立",
                "Blog搭建"
            ]
        },
        {
            "id": "http://kotokusunao.com/2024/03/11/WebsiteBuilding/Web-Tech/",
            "url": "http://kotokusunao.com/2024/03/11/WebsiteBuilding/Web-Tech/",
            "title": "网站使用的外部插件",
            "date_published": "2024-03-10T15:00:00.000Z",
            "content_html": "<div class=\"note info\">\n<p>由于网站是静态页面，如果想实现动态效果，就需要引入外部的插件，对使用到的和了解到的插件进行整理。</p>\n</div>\n<h1 id=\"搜索功能配置algolia\"><a class=\"anchor\" href=\"#搜索功能配置algolia\">#</a> 搜索功能配置 Algolia</h1>\n<p>Algolia 提供每个月 10000 次的免费搜索额度，基本上是够用了。<br />\nAlgolia 提供了亚洲区域的服务器，覆盖了中国大陆以及其他亚洲地区。</p>\n<p><div class=\"links\"><div class=\"item\" title=\"Algolia Inc.\" style=\"--block-color:#5468ff;\"><a href=\"https://www.algolia.com\" class=\"image\" data-background-image=\"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoiYWxnb2xpYS1icmFuZFwvZmlsZVwvRGVRczRpYzJpcWRwcHNQaTQ0aVoucG5nIn0:algolia-brand:iMztVbeCSM-SuJ011FE1EigUhc-yZZ5RPPpmq6DP8T0?width=2400\"></a>\n        <div class=\"info\">\n        <a href=\"https://www.algolia.com\" class=\"title\">Algolia</a>\n        <p class=\"desc\">Leading Search & Discovery API.</p>\n        </div></div></div></p>\n<h1 id=\"评论系统waline\"><a class=\"anchor\" href=\"#评论系统waline\">#</a> 评论系统 Waline</h1>\n<p>需要服务端云部署，为了国内用户也能访问推荐使用 Zeabur 部署。</p>\n<p><div class=\"links\"><div class=\"item\" title=\"Waline Contributors\" style=\"--block-color:#00adb5;\"><a href=\"https://waline.js.org/\" class=\"image\" data-background-image=\"https://waline.js.org/logo.png\"></a>\n        <div class=\"info\">\n        <a href=\"https://waline.js.org/\" class=\"title\">Waline</a>\n        <p class=\"desc\">快速，简单且高效的评论系统。</p>\n        </div></div></div></p>\n<p><div class=\"links\"><div class=\"item\" title=\"Zeabur Team\" style=\"--block-color:#3498db;\"><a href=\"https://www.zeabur.com/\" class=\"image\" data-background-image=\"https://zeabur.com/icons/logo.png\"></a>\n        <div class=\"info\">\n        <a href=\"https://www.zeabur.com/\" class=\"title\">Zeabur</a>\n        <p class=\"desc\">提供高品质软件开发服务的技术公司。</p>\n        </div></div></div></p>\n<h1 id=\"访问统计busuanzi\"><a class=\"anchor\" href=\"#访问统计busuanzi\">#</a> 访问统计 Busuanzi</h1>\n<p>基于 Golang + Redis 的简易访问量统计系统。\t<br />\n++ 国内大佬为爱发电 ++</p>\n<p><div class=\"links\"><div class=\"item\" title=\"Busuanzi Contributors\" style=\"--block-color:#27ae60;\"><a href=\"https://busuanzi.ibruce.info/\" class=\"image\" data-background-image=\"https://busuanzi.ibruce.info/images/garlic.png\"></a>\n        <div class=\"info\">\n        <a href=\"https://busuanzi.ibruce.info/\" class=\"title\">Busuanzi</a>\n        <p class=\"desc\">用于统计网站访问量的 JavaScript 插件。</p>\n        </div></div></div></p>\n",
            "tags": [
                "从零开始网站建立",
                "Blog搭建"
            ]
        },
        {
            "id": "http://kotokusunao.com/2024/03/01/Admin/2023summary/",
            "url": "http://kotokusunao.com/2024/03/01/Admin/2023summary/",
            "title": "2023年度总结",
            "date_published": "2024-03-01T04:15:17.000Z",
            "content_html": "<p>自从第一次接触 Html 语言到现在创建 Blog 网站，中间竟然间隔了这么长时间。基本上可以说是从 0 开始再学习一遍，不过也算是勉勉强强能上线了。</p>\n<p><span class=\"rainbow\">二次元果然是第一生产力</span></p>\n",
            "tags": [
                "年度总结"
            ]
        },
        {
            "id": "http://kotokusunao.com/2024/03/01/WebsiteBuilding/Hexo-upgrade/",
            "url": "http://kotokusunao.com/2024/03/01/WebsiteBuilding/Hexo-upgrade/",
            "title": "Hexo 基础命令以及如何更新主题",
            "date_published": "2024-02-29T15:00:00.000Z",
            "content_html": "<h1 id=\"hexo-基础命令以及如何更新主题\"><a class=\"anchor\" href=\"#hexo-基础命令以及如何更新主题\">#</a> Hexo 基础命令以及如何更新主题</h1>\n<p>本地运行 Hexo</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo cl <span class=\"token operator\">=</span> hexo clean </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>#清除缓存html</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>hexo s <span class=\"token operator\">=</span> hexo server</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>#启动服务预览</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>hexo g <span class=\"token operator\">=</span> hexo generate </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>#生成静态页面</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>hexo <span class=\"token keyword\">new</span> <span class=\"token class-name\">page</span> <span class=\"token string\">'navigate'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>#文章生成</pre></td></tr></table></figure><p>升级主题</p>\n<p>打开工作目录中的 package.json 文件，可以看到：</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hexo-site\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hexo generate\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token property\">\"clean\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hexo clean\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hexo deploy\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token property\">\"server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hexo server\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token property\">\"hexo\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"7.1.1\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token property\">\"esbuild\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.19.10\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token property\">\"hexo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token property\">\"hexo-algoliasearch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.1\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token property\">\"hexo-asset-link\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.2.3\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token property\">\"hexo-autoprefixer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token property\">\"hexo-deployer-git\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token property\">\"hexo-feed\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.1.1\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token property\">\"hexo-generator-archive\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token property\">\"hexo-generator-category\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token property\">\"hexo-generator-index\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token property\">\"hexo-generator-tag\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token property\">\"hexo-lightning-minify\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.1.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token property\">\"hexo-renderer-ejs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token property\">\"hexo-renderer-multi-next-markdown-it\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.2.1\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token property\">\"hexo-renderer-pug\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token property\">\"hexo-renderer-stylus\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token property\">\"hexo-server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token property\">\"hexo-theme-landscape\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token property\">\"hexo-theme-shokax\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.4.2\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token property\">\"lozad\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.16.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token property\">\"theme-shokax-anime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.0.4\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token property\">\"theme-shokax-pjax\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.0.2\"</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>将其中主题文件 &quot;hexo-theme-shokax&quot;: &quot;^0.4.2&quot; 的版本号修改为最新版本，那么在运行  <code>npm update</code>  后就会安装最新主题版本了。</p>\n",
            "tags": [
                "从零开始网站建立",
                "Blog搭建"
            ]
        },
        {
            "id": "http://kotokusunao.com/2024/02/28/AcademicTrash/B.A.T.M.A.N/",
            "url": "http://kotokusunao.com/2024/02/28/AcademicTrash/B.A.T.M.A.N/",
            "title": "使用BatMan进行adhoc网络组建!",
            "date_published": "2024-02-27T15:00:00.000Z",
            "content_html": "<h1 id=\"batman实现无线随意网络ad-hoc\"><a class=\"anchor\" href=\"#batman实现无线随意网络ad-hoc\">#</a> B.A.T.M.A.N. 实现无线随意网络 Ad Hoc</h1>\n<h1 id=\"在开始之前\"><a class=\"anchor\" href=\"#在开始之前\">#</a> 在开始之前:</h1>\n<p>使用的是一台树莓派 4B，一台显示屏用来与树莓派连接。</p>\n<h1 id=\"首先\"><a class=\"anchor\" href=\"#首先\">#</a> 首先</h1>\n<h2 id=\"配置wpa_supplicant文件\"><a class=\"anchor\" href=\"#配置wpa_supplicant文件\">#</a> 配置 wpa_supplicant 文件：</h2>\n<p>在命令行中输入：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/wpa_supplicant/wpa_supplicant.conf</pre></td></tr></table></figure><p>进入后再输入：</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ctrl_interface<span class=\"token operator\">=</span>DIR<span class=\"token operator\">=</span><span class=\"token operator\">/</span>var<span class=\"token operator\">/</span>run<span class=\"token operator\">/</span>wpa_supplicnat GROUP<span class=\"token operator\">=</span>netdev</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>update_config<span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>country<span class=\"token operator\">=</span>CN</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>network<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t\t\t\tssid<span class=\"token operator\">=</span><span class=\"token char\">''</span>XXXX<span class=\"token char\">''</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t\t\t\tpsk<span class=\"token operator\">=</span><span class=\"token char\">''</span>XXXX<span class=\"token char\">''</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t\t\t\tpriority<span class=\"token operator\">=</span><span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\t\t\t<span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>其中：</p>\n<ul>\n<li><code>ctrl_interface=DIR=/var/run/wpa_supplicant</code> ：指定控制接口的目录为  <code>/var/run/wpa_supplicant</code> ，这是  <code>wpa_supplicant</code>  用来与其他网络管理工具（例如 NetworkManager）通信的目录。</li>\n<li><code>GROUP=netdev</code> ：指定控制接口目录的访问权限，允许属于  <code>netdev</code>  组的用户访问该目录，系统默认语句不用更改。</li>\n<li><code>update_config=1</code> ：此行表示启用  <code>wpa_supplicant</code>  的配置文件自动更新功能，允许  <code>wpa_supplicant</code>  自动保存新连接信息到配置文件中。如果设置为  <code>0</code> ，则不会自动更新配置文件。</li>\n<li><code>priority</code> ：无线网络优先级，有多个 WiFi 的时候可以设置优先级，选择联网的匹配顺序，priority 值越大，优先级越高。</li>\n<li>相同的网络名称下，基于 adhoc 协议的设备会自动连接。</li>\n</ul>\n<h1 id=\"配置interfaces文件\"><a class=\"anchor\" href=\"#配置interfaces文件\">#</a> 配置 interfaces 文件</h1>\n<p>在命令行中输入：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/network/interfaces</pre></td></tr></table></figure><p>进入界面后，添加下面语句：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>auto wlan1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>allow-hotplug wlan1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>iface wlan0 inet dhcp</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf  <span class=\"token comment\">#让 wlan1 端口通过 WiFi 配置文件进行联网</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#配置 wlan0 设置为 ad-hoc 模式，方便组网</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>auto wlan0</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>iface wlan0 inet static</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>address  <span class=\"token number\">192.168</span>.11.11</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>netmask <span class=\"token number\">255.255</span>.255.0</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>network <span class=\"token number\">192.168</span>.11.0</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>broadcast <span class=\"token number\">192.168</span>.11.255</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>wireless-channel <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>wireless-essid ikemennFang-adhoc</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>wireless-mode ad-hoc</pre></td></tr></table></figure><p>其中：</p>\n<ul>\n<li><code>auto wlan1</code> ：这一行指示系统在启动时自动激活  <code>wlan1</code>  网络接口。 <code>auto</code>  关键字告诉系统在启动时自动启用这个接口。</li>\n<li><code>allow-hotplug wlan1</code> ：这一行告诉系统在插入  <code>wlan1</code>  硬件设备时启用这个接口。与  <code>auto</code>  不同， <code>allow-hotplug</code>  选项会在接口的硬件设备被插入时自动激活，而不需要系统重启。</li>\n<li><code>iface wlan0 inet dhcp</code> ：这是一个网络接口配置块的开始，它用于配置  <code>wlan0</code>  网络接口的设置。在这里， <code>wlan0</code>  被配置为使用 DHCP 自动获取 IP 地址。</li>\n<li><code>wireless</code> -essid：可以自己设置但是要保证同一个网络下名称相同。</li>\n</ul>\n<p>可以用以下命令检测那些 channel 可用：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> iwlist wlan0 channel</pre></td></tr></table></figure><h1 id=\"更新apt库\"><a class=\"anchor\" href=\"#更新apt库\">#</a> 更新 apt 库</h1>\n<p>输入以下命令更新：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> upgrade <span class=\"token parameter variable\">-y</span></pre></td></tr></table></figure><h1 id=\"设置batman-adv\"><a class=\"anchor\" href=\"#设置batman-adv\">#</a> 设置 Batman-adv</h1>\n<h2 id=\"安装batman-adv软件\"><a class=\"anchor\" href=\"#安装batman-adv软件\">#</a> 安装 Batman-adv 软件</h2>\n<p>输入以下命令安装：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> batctl</pre></td></tr></table></figure><h2 id=\"设置batman-adv软件\"><a class=\"anchor\" href=\"#设置batman-adv软件\">#</a> 设置 Batman-adv 软件：</h2>\n<p>输入命令行进行设置：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> ~/start-batman-adv.sh</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token shebang important\">#!/bin/bash</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># batman-adv interface to use</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">sudo</span> batctl <span class=\"token keyword\">if</span> <span class=\"token function\">add</span> wlan0</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">ifconfig</span> bat0 mtu <span class=\"token number\">1468</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># Tell batman-adv this is a gateway client</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">sudo</span> batctl gw_mode client</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># Activates batman-adv interfaces</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">ifconfig</span> wlan0 up</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">ifconfig</span> bat0 up</pre></td></tr></table></figure><p>这个 Bash 脚本用于配置使用 batman-adv（Better Approach To Mobile Ad-hoc Networking - Advanced）网状网络协议的系统。下面是脚本中每个部分的解释：</p>\n<ol>\n<li><code>sudo batctl if add wlan0</code> ：此命令将 <code>wlan0</code>  接口添加到 batman-adv 中。 <code>wlan0</code>  通常是一个无线网络接口的名称。这个命令告诉 batman-adv 将 <code>wlan0</code>  作为其接口之一。</li>\n<li><code>sudo ifconfig bat0 mtu 1468</code> ：这将 <code>bat0</code>  接口的最大传输单元（MTU）设置为 1468。MTU 是可以通过网络发送的数据包的最大大小。将其设置为特定值可以有助于优化网络性能或与某些网络配置兼容。</li>\n<li><code>sudo batctl gw_mode client</code> ：此命令将 batman-adv 接口 <code>bat0</code>  配置为网关客户端。在 batman-adv 网状网络中，有一些节点充当到更广泛网络（通常是互联网）的网关，此命令指定此特定节点是一个客户端，将使用其中一个网关。</li>\n<li><code>sudo ifconfig wlan0 up</code> ：这将激活 <code>wlan0</code>  接口，意味着它可以发送和接收数据，将无线网络接口启动。</li>\n<li><code>sudo ifconfig bat0 up</code> ：这将激活 <code>bat0</code>  接口，在 batman-adv 网状网络中启用它。</li>\n</ol>\n<p>请注意，此脚本使用 <code>sudo</code>  以超级用户权限运行这些命令，因此需要管理员权限。此外，脚本的成功取决于您的系统上是否存在 batman-adv 并且 <code>wlan0</code>  接口是否正确命名。在使用此脚本之前，请确保 batman-adv 已安装并且您的系统上的无线接口正确命名为 <code>wlan0</code> 。在使用此脚本时，您还应该熟悉您的特定网络设置和要求。</p>\n<div class=\"note info\">\n<p>在 BATMAN-adv 网络中，节点可以配置为三种不同的模式：客户端模式、网关模式和受限节点模式。以下是每种模式的设置方法：</p>\n</div>\n<ol>\n<li>\n<p><strong>客户端模式 ( <code>client</code> )：</strong> 在客户端模式中，节点连接到 BATMAN-adv 网络并通过网关节点访问其他网络（比如互联网）。</p>\n<p>设置节点为客户端模式的命令是：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> batctl gw_mode client</pre></td></tr></table></figure></li>\n<li>\n<p><strong>网关模式 ( <code>server</code> )：</strong> 在网关模式中，节点充当网关，负责将 BATMAN-adv 网络中的数据转发到其他网络（比如互联网）。</p>\n<p>设置节点为网关模式的命令是：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> batctl gw_mode server</pre></td></tr></table></figure></li>\n<li>\n<p><strong>受限节点模式 ( <code>off</code> )：</strong> 在受限节点模式中，节点既不是客户端也不是网关，只能与同一 BATMAN-adv 网络中的其他节点通信。</p>\n<p>设置节点为受限节点模式的命令是：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> batctl gw_mode off</pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"将start-batman-advsh文件变成可执行文件\"><a class=\"anchor\" href=\"#将start-batman-advsh文件变成可执行文件\">#</a> 将 start-batman-adv.sh 文件变成可执行文件</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> +x ~/start-batman-adv.sh</pre></td></tr></table></figure><p>确保加载 batman-adv 内核模块：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'batman-adv'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> <span class=\"token parameter variable\">--append</span> /etc/modules</pre></td></tr></table></figure><p>停止 dhcp 进程尝试管理无线局域网接口 wlan0：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'denyinterfaces wlan0'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> <span class=\"token parameter variable\">--append</span> /etc/dhcpcd.conf</pre></td></tr></table></figure><p>将启动 start-batman-adv.sh 文件写入开机启动项中，并在 exit 0 前插入：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/rc.local</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>插入此行：</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>/home/pi/start-batman-adv.sh <span class=\"token operator\">&amp;</span></pre></td></tr></table></figure><p>重启树莓派</p>\n<h1 id=\"查看网络节点\"><a class=\"anchor\" href=\"#查看网络节点\">#</a> 查看网络节点</h1>\n<p>命令行输入：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> barctl n</pre></td></tr></table></figure><p>可以查看到包含的树莓派设备的 ad-hoc 端口的 MAC 地址，如果想要识别出来每个 MAC 地址对应的是哪个树莓派<br />\n可以在 etc 文件夹下建立一个文件：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/bat-hosts</pre></td></tr></table></figure><p>在弹出的窗口中输入以下命令：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>MAC 名称</pre></td></tr></table></figure><p>再次使用查看网络节点命令即可看到对应名称。</p>\n<h1 id=\"ping\"><a class=\"anchor\" href=\"#ping\">#</a> ping</h1>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ping</span> xxxxxx <span class=\"token comment\">#对应树莓派的 ip 地址</span></pre></td></tr></table></figure><p>目前 3 个树莓派：</p>\n<p>192.168.11.11</p>\n<p>192.168.11.22</p>\n<p>192.168.11.33</p>\n<p><img loading=\"lazy\" data-src=\"https://raw.githubusercontent.com/Orangenazuna/Blog-pictures/main/Adhoc/20240115.png\" alt=\"img\" /></p>\n<h1 id=\"iperf网络吞吐量测量\"><a class=\"anchor\" href=\"#iperf网络吞吐量测量\">#</a> Iperf 网络吞吐量测量</h1>\n<h2 id=\"安装iperf\"><a class=\"anchor\" href=\"#安装iperf\">#</a> 安装 iperf</h2>\n<ul>\n<li>\n<p>执行命令</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> iperf</pre></td></tr></table></figure><h2 id=\"开启服务端\"><a class=\"anchor\" href=\"#开启服务端\">#</a> 开启服务端</h2>\n</li>\n</ul>\n<ol>\n<li>假设在一台 IP 地址为 <code>192.168.11.101</code>  的设备上启用服务端。</li>\n<li>执行 <code>iperf -s -p 5201</code> ，开启一个端口为 5201 的服务端。</li>\n</ol>\n<h2 id=\"连接服务端\"><a class=\"anchor\" href=\"#连接服务端\">#</a> 连接服务端</h2>\n<ul>\n<li>连接服务端。</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>iperf3 <span class=\"token parameter variable\">-c</span> <span class=\"token number\">192.168</span>.11.101 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">5201</span></pre></td></tr></table></figure><h1 id=\"遇到的题\"><a class=\"anchor\" href=\"#遇到的题\">#</a> 遇到的题：</h1>\n<p>​\t输入 <code>sudo barctl n</code>  后显示 <code>error  interface bat0 is not present or not a batman-adv interface</code></p>\n",
            "tags": [
                "学术垃圾清理",
                "学术垃圾"
            ]
        },
        {
            "id": "http://kotokusunao.com/2023/12/31/WordsOfApex/WordsInApex/",
            "url": "http://kotokusunao.com/2023/12/31/WordsOfApex/WordsInApex/",
            "title": "Apex学习之旅。",
            "date_published": "2023-12-30T15:00:00.000Z",
            "content_html": "<h1 id=\"apex\"><a class=\"anchor\" href=\"#apex\">#</a> APEX</h1>\n<h2 id=\"中日语对应表\"><a class=\"anchor\" href=\"#中日语对应表\">#</a> 中日语对应表</h2>\n",
            "tags": [
                "APEX日语",
                "APEX"
            ]
        },
        {
            "id": "http://kotokusunao.com/2023/12/30/AcademicTrash/LowLight-IoT-Creeptest/",
            "url": "http://kotokusunao.com/2023/12/30/AcademicTrash/LowLight-IoT-Creeptest/",
            "title": "低光照条件下的蠕变试验自动数值读取系统开发!",
            "date_published": "2023-12-29T15:00:00.000Z",
            "content_html": "<h1 id=\"低照度图像增强计算机算法\"><a class=\"anchor\" href=\"#低照度图像增强计算机算法\">#</a> 低照度图像增强计算机算法</h1>\n<p>为了解决在黑暗条件下无法识别蠕变实验指针问题。</p>\n<p>[低光照图像增强算法汇总_低照度图像增强算法_Wanderer001 的博客 - CSDN 博客]</p>\n<p>(<a href=\"https://blog.csdn.net/weixin_36670529/article/details/109058335\">https://blog.csdn.net/weixin_36670529/article/details/109058335</a>)</p>\n<h2 id=\"retinex算法202331日进度\"><a class=\"anchor\" href=\"#retinex算法202331日进度\">#</a> <strong>Retinex 算法</strong>（2023.3.1 日进度）</h2>\n<p><a href=\"https://blog.csdn.net/qq_39751352/article/details/124653791\">Retinex 算法 - CSDN 博客</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/505187561\">传统图像处理 —— 图像增强 Retinex - 知乎 (zhihu.com)</a></p>\n<p><img loading=\"lazy\" data-src=\"https://www.researchgate.net/profile/Zohair-Al-Ameen/publication/361471902/figure/fig2/AS:1169870926413830@1655930372105/Illustration-of-retinex-theory-23.png\" alt=\"img\" /></p>\n<p>核心：从 S 图像中估测 L 分量，并去除 L 分量，得到原始反射分量 R</p>\n<h3 id=\"ssrsingle-scale-retinex单尺度retinex算法\"><a class=\"anchor\" href=\"#ssrsingle-scale-retinex单尺度retinex算法\">#</a> <strong>SSR (Single Scale Retinex) 单尺度 Retinex 算法</strong></h3>\n<p>图像可以看做是入射图像和反射图像构成，入射光照射在反射物体上，通过反射物体的反射，形成反射光进入人眼。最后形成的图像可以如下公式表示：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>S</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mtext> </mtext><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>L</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mtext> </mtext><mi>y</mi><mo stretchy=\"false\">)</mo><mo>⋅</mo><mi>R</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mtext> </mtext><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S(x,\\, y)=L(x,\\, y)\\cdot R(x,\\, y)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p>式中： I (x,y) 代表被观察或照相机接收到的图像信号；L (x,y) 代表环境光的照射分量 ；R (x,y) 表示携带图像细节信息的目标物体的反射分量 。</p>\n<p>等式两边取对数得：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>L</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>=</mo><mi>L</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>I</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>−</mo><mi>L</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>L</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Log(R(x,y))=Log(I(x,y))-Log(L(x,y))\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">L</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">))</span></span></span></span></span></p>\n<p>L (x,y) 由 I (x,y) 和一个高斯核的卷积来近似表示：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>L</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>I</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>∗</mo><mi>G</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">L(x,y)=I(x,y)\\ast G(x,y)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p>上式中 * 代表卷积，G (x,y) 代表高斯核。</p>\n<p>最后，将 Log (R (x,y)) 量化为 0-255 范围的像素值：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>R</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">(</mo><mi>V</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo>−</mo><mi>M</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mi>M</mi><mi>a</mi><mi>x</mi><mo>−</mo><mi>M</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">)</mo><mo>∗</mo><mn>255</mn></mrow><annotation encoding=\"application/x-tex\">R(x,y)=(Value-Min)/(Max-Min)\\ast 255\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">Va</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\">in</span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\">in</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">255</span></span></span></span></span></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">SSR</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    res <span class=\"token operator\">=</span> img</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    L_blur <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>GaussianBlur<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    log_R <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span>res <span class=\"token operator\">+</span> <span class=\"token number\">0.001</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> np<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span>L_blur <span class=\"token operator\">+</span> <span class=\"token number\">0.001</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    minvalue<span class=\"token punctuation\">,</span> maxvalue<span class=\"token punctuation\">,</span> minloc<span class=\"token punctuation\">,</span> maxloc <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>minMaxLoc<span class=\"token punctuation\">(</span>log_R<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    log_R <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>log_R <span class=\"token operator\">-</span> minvalue<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">255.0</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>maxvalue <span class=\"token operator\">-</span> minvalue<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    dst <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>convertScaleAbs<span class=\"token punctuation\">(</span>log_R<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    dst <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> dst<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">return</span> dst</pre></td></tr></table></figure><h3 id=\"多尺度msrmulti-scale-retinex多尺度retinex算法\"><a class=\"anchor\" href=\"#多尺度msrmulti-scale-retinex多尺度retinex算法\">#</a> <strong>多尺度 MSR (Multi-Scale Retinex) 多尺度 Retinex 算法</strong></h3>\n<p>MSR 是在 SSR 基础上发展来的，优点是可以同时保持图像高保真度与对图像的动态范围进行压缩的同时，MSR 也可实现色彩增强、颜色恒常性、局部动态范围压缩、全局动态范围压缩，也可以用于 X 光图像增强。最为经典的就是 3 尺度的，即大、中、小。</p>\n<p>对原始图像进行每个尺度的高斯滤波，得到模糊后的图像 Li (x,y), 其中小标 i 表示尺度数.</p>\n<p>然后对每个尺度下进行累加计算:</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>L</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>=</mo><mi>L</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>+</mo><mi>W</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo>∗</mo><mo stretchy=\"false\">(</mo><mi>L</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>I</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>−</mo><mi>L</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>L</mi><mi>i</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Log(R(x,y))=Log(R(x,y))+Weight(i)\\ast (Log(I(x,y))-Log(Li(x,y)))\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">t</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">i</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)))</span></span></span></span></span></p>\n<p>其中 Weight (i) 表示每个尺度对应的权重，要求各尺度权重之和必须为 1，经典的取值为等权重。</p>\n<p>基本的计算原理:</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>R</mi><mrow><mi>M</mi><mi>S</mi><mi>R</mi></mrow></msub><mo>=</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mrow><msub><mi>w</mi><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>I</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><msub><mi>I</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>∗</mo><msub><mi>G</mi><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">R_{MSR}=\\sum_{n=1}^{N}{w_{n}(logI_{i}(x,y)-log(I_{i}(x,y)\\ast G_{n}(x,y)))}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.00773em;\">MSR</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0954em;vertical-align:-1.2671em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283em;\"><span style=\"top:-1.8829em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2671em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)))</span></span></span></span></span></span></p>\n<p>上式中，I 为原始输入图像，G 是滤波函数，一般为高斯函数，N 为尺度的数量，W 为每个尺度的权重，一般都为 1/N， R 表示在对数域的图像的输出。</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">MSR</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> scales<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    number <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>scales<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    res <span class=\"token operator\">=</span> img</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    h<span class=\"token punctuation\">,</span> w <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    dst_R <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">,</span> w<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    log_R <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">,</span> w<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        L_blur <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>GaussianBlur<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>scales<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> scales<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        log_R <span class=\"token operator\">+=</span> np<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span>res <span class=\"token operator\">+</span> <span class=\"token number\">0.001</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> np<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span>L_blur <span class=\"token operator\">+</span> <span class=\"token number\">0.001</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    log_R <span class=\"token operator\">=</span> log_R <span class=\"token operator\">/</span> number</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    cv2<span class=\"token punctuation\">.</span>normalize<span class=\"token punctuation\">(</span>log_R<span class=\"token punctuation\">,</span> dst_R<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>NORM_MINMAX<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    dst_R <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>convertScaleAbs<span class=\"token punctuation\">(</span>dst_R<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    dst <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> dst_R<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">return</span> dst</pre></td></tr></table></figure><hr />\n<h2 id=\"霍夫变换圆形与直线检测\"><a class=\"anchor\" href=\"#霍夫变换圆形与直线检测\">#</a> <strong>霍夫变换圆形与直线检测</strong></h2>\n<p><a href=\"https://blog.csdn.net/shanchuan2012/article/details/74010561\">浅析霍夫变换检测直线和圆_python 霍夫圆检测找不到圆的原因 - CSDN 博客</a></p>\n<figure class=\"highlight matlab\"><figcaption data-lang=\"MATLAB\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">% 霍夫变换理解 圆 2 维</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token string\">'all'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">% 给出一个圆，圆心（1，1），半径 3</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>r <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>x <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">2</span> <span class=\"token operator\">:</span> <span class=\"token number\">0.5</span> <span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% x 定义域</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>y <span class=\"token operator\">=</span> <span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">.^</span><span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.^</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">+</span> <span class=\"token number\">0</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 半个圆</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">% 图像空间上的圆</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>figure<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 实际点</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>hold on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>x0 <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">2</span> <span class=\"token operator\">:</span> <span class=\"token number\">0.01</span> <span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>y0 <span class=\"token operator\">=</span> <span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">.^</span><span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>x0<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.^</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span>y0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 圆曲线</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>hold off<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>axis equal<span class=\"token punctuation\">;</span> <span class=\"token comment\">% 各个轴比例相同</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token function\">xlabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token function\">ylabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">% 参数空间</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>figure<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">% set(gcf,'position',[100,100,500,500]);</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>theta <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> <span class=\"token number\">0.01</span> <span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token keyword\">pi</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">for</span> ir <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token number\">i</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token comment\">%length(x)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        a <span class=\"token operator\">=</span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> ir<span class=\"token operator\">*</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 极坐标</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        b <span class=\"token operator\">=</span> <span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> ir<span class=\"token operator\">*</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 画圆</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        hold on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token function\">plot</span><span class=\"token punctuation\">(</span><span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 画圆心</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>hold off<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>grid on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>gca<span class=\"token punctuation\">,</span> <span class=\"token string\">'xtick'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">6</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>axis equal<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token function\">xlabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token function\">ylabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>gcf<span class=\"token punctuation\">,</span> <span class=\"token string\">'-djpeg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c2_2.jpg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-r72'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight matlab\"><figcaption data-lang=\"MATLAB\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">% 霍夫变换 (Hough Transform)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">% 直线</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>clc<span class=\"token punctuation\">;</span>clear<span class=\"token punctuation\">;</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token string\">'all'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">% 测试点</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>y <span class=\"token operator\">=</span> x <span class=\"token operator\">+</span> <span class=\"token number\">4</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>hold on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>y1 <span class=\"token operator\">=</span> x <span class=\"token operator\">+</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token function\">xlabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token function\">ylabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>gcf<span class=\"token punctuation\">,</span> <span class=\"token string\">'-djpeg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'line1.jpg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-r72'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">% 笛卡尔坐标</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>figure<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>legd <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>k <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token operator\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">for</span> <span class=\"token number\">i</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token function\">length</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    b <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>k <span class=\"token operator\">+</span> <span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    hold on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    legd <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>legd<span class=\"token punctuation\">,</span> <span class=\"token function\">num2str</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>hold off<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">% legend(legd);</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>grid on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token function\">xlabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'k'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token function\">ylabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>gcf<span class=\"token punctuation\">,</span> <span class=\"token string\">'-djpeg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'line2.jpg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-r72'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\">% 极坐标</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>figure<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>theta <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token operator\">/</span><span class=\"token number\">180</span><span class=\"token operator\">*</span><span class=\"token keyword\">pi</span> <span class=\"token operator\">:</span> <span class=\"token number\">0.1</span> <span class=\"token operator\">:</span> <span class=\"token number\">180</span><span class=\"token operator\">/</span><span class=\"token number\">180</span><span class=\"token operator\">*</span><span class=\"token keyword\">pi</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">for</span> <span class=\"token number\">i</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token function\">length</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    ruo <span class=\"token operator\">=</span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">,</span> ruo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    hold on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>hold off<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>grid on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token function\">xlabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\theta'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token function\">ylabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\rho'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>gcf<span class=\"token punctuation\">,</span> <span class=\"token string\">'-djpeg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'line3.jpg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-r72'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight matlab\"><figcaption data-lang=\"MATLAB\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">% 霍夫变换理解 圆 3 维</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token string\">'all'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">% 给出一个圆，圆心（1，1），半径 3</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>r <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>x <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">2</span> <span class=\"token operator\">:</span> <span class=\"token number\">0.5</span> <span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% x 定义域</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>y <span class=\"token operator\">=</span> <span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">.^</span><span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>x<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.^</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">+</span> <span class=\"token number\">0</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 半个圆</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">% 图像空间上的圆</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>figure<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 实际点</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>hold on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>x0 <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">2</span> <span class=\"token operator\">:</span> <span class=\"token number\">0.01</span> <span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>y0 <span class=\"token operator\">=</span> <span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>r<span class=\"token operator\">.^</span><span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>x0<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.^</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span>y0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 圆曲线</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>hold off<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>axis equal<span class=\"token punctuation\">;</span> <span class=\"token comment\">% 各个轴比例相同</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token function\">xlabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token function\">ylabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>gcf<span class=\"token punctuation\">,</span> <span class=\"token string\">'-djpeg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c1.jpg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-r72'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">% 参数空间</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">% 3 维图画的很慢，可能有地方弄错了</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>figure<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">% set(gcf,'position',[100,100,500,500]);</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>theta <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> <span class=\"token number\">0.01</span> <span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token keyword\">pi</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">for</span> ir <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token operator\">:</span> <span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token number\">i</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token comment\">%length(x)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        a <span class=\"token operator\">=</span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> ir<span class=\"token operator\">*</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 极坐标</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        b <span class=\"token operator\">=</span> <span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> ir<span class=\"token operator\">*</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        r <span class=\"token operator\">=</span> ir<span class=\"token operator\">*</span><span class=\"token function\">ones</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token function\">plot3</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">,</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 画圆</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        hold on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token function\">plot3</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span><span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token number\">i</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">% 画圆心</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>hold off<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>grid on<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>gca<span class=\"token punctuation\">,</span> <span class=\"token string\">'xtick'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">6</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token comment\">% axis equal;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token function\">xlabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token function\">ylabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token function\">zlabel</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>gcf<span class=\"token punctuation\">,</span> <span class=\"token string\">'-djpeg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c2.jpg'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-r72'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h1 id=\"配置树莓派模块monostick\"><a class=\"anchor\" href=\"#配置树莓派模块monostick\">#</a> 配置树莓派模块（MONOSTICK）</h1>\n<p><a href=\"https://mono-wireless.com/jp/products/twelite-pal/sense/pal-usage.html\">PAL の使用方法｜MONO-WIRELESS.COM</a></p>\n<p><img loading=\"lazy\" data-src=\"https://raw.githubusercontent.com/Orangenazuna/Blog-pictures/3125ff9884be4a3457a010f66eb929138d57c570/Lowlight/image-20230622145453447-1687413297625-5.png\" alt=\"image-20230622145453447\" /></p>\n<p>目前还未实现将数据提取出来，进行判定的程序。</p>\n<p>通过传感器的数据与图像数值双重判断，来控制灯光的开关，能够更加智能。</p>\n<p><img loading=\"lazy\" data-src=\"https://raw.githubusercontent.com/Orangenazuna/Blog-pictures/main/Lowlight/image-20230724175435928.png\" alt=\"image-20230724175435928\" /></p>\n<p>结果：收集了半个月的数据，其中分析出来在 Lux 大于 250 时，100% 符合室内灯打开状态，尽管有些灯可能不亮导致不能稳定在 300lux。所以整合判断。</p>\n<h2 id=\"试验整体预期\"><a class=\"anchor\" href=\"#试验整体预期\">#</a> 试验整体预期：</h2>\n<ol>\n<li>寻找合适的高斯核，降低图片模糊程度。Y</li>\n<li>搞懂 MSSR、MSRCP Y</li>\n<li>尝试使用实验指针图像。Y</li>\n<li>通过树莓派来控制灯光的开关 Y</li>\n<li>不断拍摄照片读取摄像头的每个帧率来判断光照强度 Y</li>\n<li>整合代码，实现树莓派的操作。Y</li>\n<li>提前判断光照强度，在进行图像处理 Y</li>\n<li>改进代码，提高运算速度 Y</li>\n</ol>\n<h2 id=\"研究进度\"><a class=\"anchor\" href=\"#研究进度\">#</a> 研究进度：</h2>\n<ol>\n<li>\n<p>在 vscode 配置 opencv（2023.3.2 日进度）</p>\n<p><a href=\"https://blog.csdn.net/scott198510/article/details/125843447\">win10 系统 VSCODE 配置 opencv_vscode 配置 opencv_scott198512 的博客 - CSDN 博客</a></p>\n</li>\n<li>\n<p>在 pycharm 配置 opencv（2023.3.20）</p>\n<ol>\n<li>\n<p>data 文件夹中的 test1.jpg</p>\n</li>\n<li>\n<p>编辑代码将输出图片保存到本地，并且保存到包括日期的文件夹内以时间命名。</p>\n</li>\n<li>\n<p>在 pyhton 中使用 opencv 的时候出现该问题，虽然不影响运行，但是 imshow 等函数不能自动补全以及提示错误等搞得很难受，所以不能坐视不理 ，最终我的解决方案如下：</p>\n<p>右键文件夹 venv ，如图，设为 Excluded，文件夹变成橘色，橘势大好，问题解决。</p>\n<p>个人情况问题是完美解决了，提示消失，可以自动补全等，但是不是很懂什么原理，希望有明白的大佬指点一下，谢谢！（换成 VScode 完美解决）</p>\n</li>\n</ol>\n</li>\n<li>\n<p>将图片输出到本地 output 文件夹内，并且按照日期时间分类（2023.3.21）</p>\n</li>\n<li>\n<p>将圆圈图片以及指针图片输出到 HARI 文件夹内，并按照日期时间分类（2023.4.5)</p>\n</li>\n<li>\n<p>将程序上传到 GitHub (2023.4.6)</p>\n</li>\n<li>\n<p>利用霍夫变换代码检测出圆盘指针的位置（2023.4.8）</p>\n</li>\n<li>\n<p>删除多余 MSRCP 代码（2023.4.10）</p>\n</li>\n<li>\n<p>实现批量读取与输出（虽然没什么用）（2023.4.15）</p>\n</li>\n<li>\n<p>整合代码，将所有图片一次性处理完毕并分别保存（2023.4.17）</p>\n</li>\n<li>\n<p>测试实验图片，发现部分图片过亮，读取不出指针，需要进行图像强度判断（2023.4.18）</p>\n</li>\n<li>\n<p>目前实验的进度与问题点整理（2023 年 6 月 12 日）</p>\n</li>\n<li>\n<p>调试好了树莓派的无线模块，目前可以测量温度，湿度，和光照（2023 年 6 月 22 日）</p>\n</li>\n<li>\n<p>报告会：</p>\n</li>\n</ol>\n<p>​\t先週は 5.29-6.4 のデータを収集しました。今の値 m は、画像をグレースケール画像に変換した後の、各画素点の閾値（現在は 128 に設定されている）からの平均偏差になります。 先週収集したデータは次の図１のようになります。10 時 46 分以降、学生が研究室に入り、実験室の照明がつき、窓を閉めから、m 値は 35 前後で安定になりました。</p>\n<p><img loading=\"lazy\" data-src=\"https://raw.githubusercontent.com/Orangenazuna/Blog-pictures/main/Lowlight/image-20230612171243166.png\" alt=\"image-20230612171243166\" /></p>\n<p>​\t但し、5.30 日のデータを分析して、10:44 の時（図 2）、ｍの数値は 47.3858。10:46 の時（図 3）、ｍの数値は 39.6049、値は高ければ高いほど良いと思いますけど。10:44（値が高い方）の写真の中でダイヤルの針を認められません。逆に 10:46 の時、針を認められます。また、ダイヤルの鏡面反射によるものである可能性もあります。そして、今の画像輝度の判定アルゴリズムが問題があります、今新しい方法を探しています。</p>\n<p><img loading=\"lazy\" data-src=\"https://raw.githubusercontent.com/Orangenazuna/Blog-pictures/main/Lowlight/image-20230612171251299-1686557575562-7.png\" alt=\"image-20230612171251299\" /></p>\n<p>问题点：</p>\n<p>​\t目前整体判断灰度图像与阈值的平均偏离程度的时候，可能图像中会存在亮度很高的区域，整张图的范围内取平均值时，会让数值的 m 不能准确反应表盘的明暗程度。可能会存在整体 m 值偏高，但无法读取表盘或者整体 m 值偏低，仍然可以读取表盘的情况。</p>\n<p>原因：</p>\n<p>​\t图像中存在偏亮区域，影响整体的平均值。</p>\n<p>解决方法：</p>\n<p>​\t将数值 m 的判断区域缩小，仅在表盘区域判断，首先判断出表盘位置并记录，其次使用记录下来的数据确定表盘位置（以便在不能识别的情况下判断），记录并分析数值 m。</p>\n<p>进步：</p>\n<p>​\t编写了 detecdetected_circle.py 程序实现了对表盘位置以及大小的记录，并在以后的判定中，只要摄像机的位置不变，一直都可以截取表盘位置的光照强度并分析数值 m 的大小。</p>\n<h1 id=\"目前实验完成度\"><a class=\"anchor\" href=\"#目前实验完成度\">#</a> 目前实验完成度</h1>\n<p><img loading=\"lazy\" data-src=\"https://raw.githubusercontent.com/Orangenazuna/Blog-pictures/main/Lowlight/image-20231221162918095.png\" alt=\"image-20231221162918095\" /></p>\n<p>​\t<img loading=\"lazy\" data-src=\"https://raw.githubusercontent.com/Orangenazuna/Blog-pictures/main/Lowlight/image-20231221162942796.png\" alt=\"image-20231221162942796\" /></p>\n<p>实验可以通过摄像头以及感光元件进行精度确认，并且自动开启或关闭灯光，目前来说，在没有新的元件加入的情况下，该实验已经结束。</p>\n",
            "tags": [
                "学术垃圾清理",
                "学术垃圾"
            ]
        },
        {
            "id": "http://kotokusunao.com/2023/12/21/WebsiteBuilding/Hello-world/",
            "url": "http://kotokusunao.com/2023/12/21/WebsiteBuilding/Hello-world/",
            "title": "完成了个人Blog创建!",
            "date_published": "2023-12-20T15:00:00.000Z",
            "content_html": "<h1 id=\"热烈庆祝我的blog网站成立\"><a class=\"anchor\" href=\"#热烈庆祝我的blog网站成立\">#</a> 热烈庆祝我的 Blog 网站成立！</h1>\n<p>今天是一个特殊的日子，我的<strong> Blog 网站</strong>正式上线了！🎉🥳<br />\n<img loading=\"lazy\" data-src=\"https://github.com/Orangenazuna/Blog-pictures/blob/7432c0e140e5bac9ac5f92c560292373a09a97cb/Sticker_ly.jpg?raw=true\" alt=\"Eatting\" /></p>\n<p>#特别感谢：</p>\n<pre><code>感谢大佬zkz098的开发以及慷慨的问题解答！\n大佬博客：https://www.kaitaku.xyz/\n</code></pre>\n<h1 id=\"技术文档\"><a class=\"anchor\" href=\"#技术文档\">#</a> 技术文档</h1>\n<p><a href=\"https://docs.kaitaku.xyz/develop/basic/\">ShokaX 官方开发文档</a></p>\n<p>相关文档:</p>\n<ul>\n<li><a href=\"https://hexo.io/zh-cn/docs/templates\">Hexo 官方文档</a></li>\n<li><a href=\"http://stylus.bootcss.com/\">Stylus 中文网</a></li>\n<li><a href=\"https://www.pugjs.cn/api/getting-started.html\">Pug 模板引擎中文文档</a></li>\n<li><a href=\"https://www.tslang.cn/docs/home.html\">Typescript 中文网</a></li>\n<li><a href=\"https://easyhexo.com/\">Easy hexo</a></li>\n<li><a href=\"https://cloud.tencent.com/developer/article/1728806\">Hexo 博客框架初识入门到进阶</a></li>\n<li><a href=\"https://img.tg/\">IMG 图床</a></li>\n</ul>\n",
            "tags": [
                "从零开始网站建立",
                "Blog搭建"
            ]
        },
        {
            "id": "http://kotokusunao.com/2023/10/09/AcademicTrash/Wireless-BASE/",
            "url": "http://kotokusunao.com/2023/10/09/AcademicTrash/Wireless-BASE/",
            "title": "无线网络基础知识集中",
            "date_published": "2023-10-08T15:00:00.000Z",
            "content_html": "<h1 id=\"无线组实验名词概念大全\"><a class=\"anchor\" href=\"#无线组实验名词概念大全\">#</a> 无线组实验名词概念大全</h1>\n<h2 id=\"dhcp\"><a class=\"anchor\" href=\"#dhcp\">#</a> DHCP</h2>\n<p>Dynamic Host Configuration Protocol for IPv6.  The terms DHCPv4 and DHCPv6 are used only in contexts where it is necessary to avoid ambiguity.</p>\n<p><a href=\"https://wiki.archlinuxcn.org/wiki/Dhcpcd\">DHCPcd - Arch Linux 中文维基 (archlinuxcn.org)</a></p>\n<h2 id=\"dnsmasq\"><a class=\"anchor\" href=\"#dnsmasq\">#</a> Dnsmasq</h2>\n<p>Dnsmasq 提供 DNS 缓存和 DHCP 服务功能。作为域名解析服务器（DNS），Dnsmasq 可以通过缓存 DNS 请求来提高对访问过的网址的连接速度。作为 DHCP 服务器，Dnsmasq 可以用于为局域网电脑分配内网 ip 地址和提供路由。</p>\n<h2 id=\"配置ac\"><a class=\"anchor\" href=\"#配置ac\">#</a> 配置 AC</h2>\n<p><a href=\"https://thepi.io/how-to-use-your-raspberry-pi-as-a-wireless-access-point/\">How to use your Raspberry Pi as a wireless access point - The Pi</a></p>\n<h2 id=\"hostapd配置文件\"><a class=\"anchor\" href=\"#hostapd配置文件\">#</a> HOSTAPD 配置文件</h2>\n<p><strong><a href=\"https://w1.fi/cgit/hostap/plain/hostapd/hostapd.conf\">https://w1.fi/cgit/hostap/plain/hostapd/hostapd.conf</a></strong></p>\n<p>与 802.11ax 相关的配置：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">##### IEEE 802.11ax related configuration #####################################</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#ieee80211ax: Whether IEEE 802.11ax (HE) is enabled</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 0 = disabled (default)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 1 = enabled</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#ieee80211ax=1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># Require stations to support HE PHY (reject association if they do not)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">#require_he=1</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># disable_11ax: Boolean (0/1) to disable HE for a specific BSS</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">#disable_11ax=0</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#he_su_beamformer: HE single user beamformer support</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 0 = not supported (default)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># 1 = supported</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">#he_su_beamformer=1</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">#he_su_beamformee: HE single user beamformee support</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># 0 = not supported (default)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># 1 = supported</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">#he_su_beamformee=1</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">#he_mu_beamformer: HE multiple user beamformer support</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># 0 = not supported (default)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># 1 = supported</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">#he_mu_beamformer=1</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\"># he_bss_color: BSS color (1-63)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">#he_bss_color=1</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\"># he_bss_color_partial: BSS color AID equation</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\">#he_bss_color_partial=0</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\">#he_default_pe_duration: The duration of PE field in an HE PPDU in us</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\"># Possible values are 0 us (default), 4 us, 8 us, 12 us, and 16 us</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\">#he_default_pe_duration=0</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\">#he_twt_required: Whether TWT is required</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token comment\"># 0 = not required (default)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token comment\"># 1 = required</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token comment\">#he_twt_required=0</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token comment\">#he_twt_responder: Whether TWT (HE) responder is enabled</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token comment\"># 0 = disabled</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token comment\"># 1 = enabled if supported by the driver (default)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token comment\">#he_twt_responder=1</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token comment\">#he_rts_threshold: Duration of STA transmission</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token comment\"># 0 = not set (default)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token comment\"># unsigned integer = duration in units of 16 us</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token comment\">#he_rts_threshold=0</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token comment\">#he_er_su_disable: Disable 242-tone HE ER SU PPDU reception by the AP</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token comment\"># 0 = enable reception (default)</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token comment\"># 1 = disable reception</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token comment\">#he_er_su_disable=0</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token comment\"># HE operating channel information; see matching vht_* parameters for details.</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token comment\"># he_oper_centr_freq_seg0_idx field is used to indicate center frequency of 80</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token comment\"># and 160 MHz bandwidth operation. In 80+80 MHz operation, it is the center</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token comment\"># frequency of the lower frequency segment. he_oper_centr_freq_seg1_idx field</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token comment\"># is used only with 80+80 MHz bandwidth operation and it is used to transmit</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token comment\"># the center frequency of the second segment.</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token comment\"># On the 6 GHz band the center freq calculation starts from 5.950 GHz offset.</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token comment\"># For example idx=3 would result in 5965 MHz center frequency. In addition,</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token comment\"># he_oper_chwidth is ignored, and the channel width is derived from the</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token comment\"># configured operating class or center frequency indexes (see</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token comment\"># IEEE P802.11ax/D6.1 Annex E, Table E-4).</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token comment\">#he_oper_chwidth (see vht_oper_chwidth)</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token comment\">#he_oper_centr_freq_seg0_idx</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token comment\">#he_oper_centr_freq_seg1_idx</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token comment\">#he_basic_mcs_nss_set: Basic NSS/MCS set</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre><span class=\"token comment\"># 16-bit combination of 2-bit values of Max HE-MCS For 1..8 SS; each 2-bit</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token comment\"># value having following meaning:</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre><span class=\"token comment\"># 0 = HE-MCS 0-7, 1 = HE-MCS 0-9, 2 = HE-MCS 0-11, 3 = not supported</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token comment\">#he_basic_mcs_nss_set</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre></pre></td></tr><tr><td data-num=\"80\"></td><td><pre><span class=\"token comment\">#he_mu_edca_qos_info_param_count</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre><span class=\"token comment\">#he_mu_edca_qos_info_q_ack</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre><span class=\"token comment\">#he_mu_edca_qos_info_queue_request=1</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre><span class=\"token comment\">#he_mu_edca_qos_info_txop_request</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_be_aifsn=0</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_be_ecwmin=15</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_be_ecwmax=15</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_be_timer=255</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_bk_aifsn=0</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_bk_aci=1</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_bk_ecwmin=15</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_bk_ecwmax=15</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_bk_timer=255</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_vi_ecwmin=15</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_vi_ecwmax=15</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_vi_aifsn=0</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_vi_aci=2</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_vi_timer=255</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_vo_aifsn=0</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_vo_aci=3</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_vo_ecwmin=15</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_vo_ecwmax=15</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre><span class=\"token comment\">#he_mu_edca_ac_vo_timer=255</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre></pre></td></tr><tr><td data-num=\"104\"></td><td><pre><span class=\"token comment\"># Spatial Reuse Parameter Set</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre><span class=\"token comment\"># SR Control field value</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre><span class=\"token comment\"># B0 = PSR Disallowed</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre><span class=\"token comment\"># B1 = Non-SRG OBSS PD SR Disallowed</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre><span class=\"token comment\"># B2 = Non-SRG Offset Present</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre><span class=\"token comment\"># B3 = SRG Information Present</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre><span class=\"token comment\"># B4 = HESIGA_Spatial_reuse_value15_allowed</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre><span class=\"token comment\">#he_spr_sr_control</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre><span class=\"token comment\"># Non-SRG OBSS PD Max Offset (included if he_spr_sr_control B2=1)</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre><span class=\"token comment\">#he_spr_non_srg_obss_pd_max_offset</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre></pre></td></tr><tr><td data-num=\"117\"></td><td><pre><span class=\"token comment\"># SRG OBSS PD Min Offset (included if he_spr_sr_control B3=1)</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre><span class=\"token comment\">#he_spr_srg_obss_pd_min_offset</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre><span class=\"token comment\"># SRG OBSS PD Max Offset (included if he_spr_sr_control B3=1)</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre><span class=\"token comment\">#he_spr_srg_obss_pd_max_offset</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre><span class=\"token comment\"># SPR SRG BSS Color (included if he_spr_sr_control B3=1)</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre><span class=\"token comment\"># This config represents SRG BSS Color Bitmap field of Spatial Reuse Parameter</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre><span class=\"token comment\"># Set element that indicates the BSS color values used by members of the</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre><span class=\"token comment\"># SRG of which the transmitting STA is a member. The value is in range of 0-63.</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre><span class=\"token comment\">#he_spr_srg_bss_colors=1 2 10 63</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre><span class=\"token comment\"># SPR SRG Partial BSSID (included if he_spr_sr_control B3=1)</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre><span class=\"token comment\"># This config represents SRG Partial BSSID Bitmap field of Spatial Reuse</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre><span class=\"token comment\"># Parameter Set element that indicates the Partial BSSID values used by members</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre><span class=\"token comment\"># of the SRG of which the transmitting STA is a member. The value range</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre><span class=\"token comment\"># corresponds to one of the 64 possible values of BSSID[39:44], where the lowest</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre><span class=\"token comment\"># numbered bit corresponds to Partial BSSID value 0 and the highest numbered bit</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre><span class=\"token comment\"># corresponds to Partial BSSID value 63.</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre><span class=\"token comment\">#he_spr_srg_partial_bssid=0 1 3 63</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre><span class=\"token comment\">#he_6ghz_max_mpdu: Maximum MPDU Length of HE 6 GHz band capabilities.</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre><span class=\"token comment\"># Indicates maximum MPDU length</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre><span class=\"token comment\"># 0 = 3895 octets</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre><span class=\"token comment\"># 1 = 7991 octets</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre><span class=\"token comment\"># 2 = 11454 octets (default)</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre><span class=\"token comment\">#he_6ghz_max_mpdu=2</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre><span class=\"token comment\">#he_6ghz_max_ampdu_len_exp: Maximum A-MPDU Length Exponent of HE 6 GHz band</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre><span class=\"token comment\"># capabilities. Indicates the maximum length of A-MPDU pre-EOF padding that</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre><span class=\"token comment\"># the STA can receive. This field is an integer in the range of 0 to 7.</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre><span class=\"token comment\"># The length defined by this field is equal to</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre><span class=\"token comment\"># 2 pow(13 + Maximum A-MPDU Length Exponent) -1 octets</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre><span class=\"token comment\"># 0 = AMPDU length of 8k</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre><span class=\"token comment\"># 1 = AMPDU length of 16k</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre><span class=\"token comment\"># 2 = AMPDU length of 32k</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre><span class=\"token comment\"># 3 = AMPDU length of 65k</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre><span class=\"token comment\"># 4 = AMPDU length of 131k</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre><span class=\"token comment\"># 5 = AMPDU length of 262k</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre><span class=\"token comment\"># 6 = AMPDU length of 524k</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre><span class=\"token comment\"># 7 = AMPDU length of 1048k (default)</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre><span class=\"token comment\">#he_6ghz_max_ampdu_len_exp=7</span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre><span class=\"token comment\">#he_6ghz_rx_ant_pat: Rx Antenna Pattern Consistency of HE 6 GHz capability.</span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre><span class=\"token comment\"># Indicates the possibility of Rx antenna pattern change</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre><span class=\"token comment\"># 0 = Rx antenna pattern might change during the lifetime of an association</span></pre></td></tr><tr><td data-num=\"163\"></td><td><pre><span class=\"token comment\"># 1 = Rx antenna pattern does not change during the lifetime of an association</span></pre></td></tr><tr><td data-num=\"164\"></td><td><pre><span class=\"token comment\">#     (default)</span></pre></td></tr><tr><td data-num=\"165\"></td><td><pre><span class=\"token comment\">#he_6ghz_rx_ant_pat=1</span></pre></td></tr><tr><td data-num=\"166\"></td><td><pre><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"167\"></td><td><pre><span class=\"token comment\">#he_6ghz_tx_ant_pat: Tx Antenna Pattern Consistency of HE 6 GHz capability.</span></pre></td></tr><tr><td data-num=\"168\"></td><td><pre><span class=\"token comment\"># Indicates the possibility of Tx antenna pattern change</span></pre></td></tr><tr><td data-num=\"169\"></td><td><pre><span class=\"token comment\"># 0 = Tx antenna pattern might change during the lifetime of an association</span></pre></td></tr><tr><td data-num=\"170\"></td><td><pre><span class=\"token comment\"># 1 = Tx antenna pattern does not change during the lifetime of an association</span></pre></td></tr><tr><td data-num=\"171\"></td><td><pre><span class=\"token comment\">#     (default)</span></pre></td></tr><tr><td data-num=\"172\"></td><td><pre><span class=\"token comment\">#he_6ghz_tx_ant_pat=1</span></pre></td></tr><tr><td data-num=\"173\"></td><td><pre></pre></td></tr><tr><td data-num=\"174\"></td><td><pre><span class=\"token comment\"># 6 GHz Access Point type</span></pre></td></tr><tr><td data-num=\"175\"></td><td><pre><span class=\"token comment\"># This config is to set the 6 GHz Access Point type. Possible options are:</span></pre></td></tr><tr><td data-num=\"176\"></td><td><pre><span class=\"token comment\"># 0 = Indoor AP (default)</span></pre></td></tr><tr><td data-num=\"177\"></td><td><pre><span class=\"token comment\"># 1 = Standard Power AP</span></pre></td></tr><tr><td data-num=\"178\"></td><td><pre><span class=\"token comment\"># This has no impact for operation on other bands.</span></pre></td></tr><tr><td data-num=\"179\"></td><td><pre><span class=\"token comment\">#he_6ghz_reg_pwr_type=0</span></pre></td></tr><tr><td data-num=\"180\"></td><td><pre></pre></td></tr><tr><td data-num=\"181\"></td><td><pre><span class=\"token comment\"># Unsolicited broadcast Probe Response transmission settings</span></pre></td></tr><tr><td data-num=\"182\"></td><td><pre><span class=\"token comment\"># This is for the 6 GHz band only. If the interval is set to a non-zero value,</span></pre></td></tr><tr><td data-num=\"183\"></td><td><pre><span class=\"token comment\"># the AP schedules unsolicited broadcast Probe Response frames to be</span></pre></td></tr><tr><td data-num=\"184\"></td><td><pre><span class=\"token comment\"># transmitted for in-band discovery. Refer to</span></pre></td></tr><tr><td data-num=\"185\"></td><td><pre><span class=\"token comment\"># IEEE P802.11ax/D8.0 26.17.2.3.2, AP behavior for fast passive scanning.</span></pre></td></tr><tr><td data-num=\"186\"></td><td><pre><span class=\"token comment\"># Valid range: 0..20 TUs; default is 0 (disabled)</span></pre></td></tr><tr><td data-num=\"187\"></td><td><pre><span class=\"token comment\">#unsol_bcast_probe_resp_interval=0</span></pre></td></tr></table></figure><h2 id=\"basic-service-set-bss-coloring\"><a class=\"anchor\" href=\"#basic-service-set-bss-coloring\">#</a> Basic Service Set (BSS)  Coloring</h2>\n<p>BSS marks shared frequencies to allow 802.11ax access points to determine whether simultaneous use of spectrum is permissible. This technology reduces interference due to congestion（堵塞） and ensures consistent service to multiple connected devices in high-density environments.</p>\n<h2 id=\"wpawi-fi-protected-access\"><a class=\"anchor\" href=\"#wpawi-fi-protected-access\">#</a> <strong>WPA</strong>（<strong>W</strong>i-Fi <strong>P</strong>rotected <strong>A</strong>ccess）</h2>\n<p>意即 “Wi-Fi 访问保护”，是一种由 Wi-Fi 联盟制订与发布，用来保护<a href=\"https://zh.wikipedia.org/wiki/%E7%84%A1%E7%B7%9A%E7%B6%B2%E8%B7%AF\">无线网络</a>（<a href=\"https://zh.wikipedia.org/wiki/Wi-Fi\">Wi-Fi</a>）访问安全的技术标准。前一代<a href=\"https://zh.wikipedia.org/wiki/%E6%9C%89%E7%B7%9A%E7%AD%89%E6%95%88%E5%8A%A0%E5%AF%86\">有线等效加密</a>（Wired Equivalent Privacy, WEP）系统中，被发现若干严重的弱点，因此 Wi-Fi 联盟推出 WPA、WPA2 与 WPA3 系列来加强无线网络安全。</p>\n<p>目前广泛实现的有 WPA、WPA2 两个标准。第一代 WPA (以 TKIP 为基础) 由 2003 年开始激活，WPA 实现了<a href=\"https://zh.wikipedia.org/wiki/IEEE\"> IEEE</a> <a href=\"https://zh.wikipedia.org/wiki/802.11i\">802.11i</a> 标准的大部分，是在 802.11i 完备之前替代 WEP 的过渡方案。WPA 的设计可以用在所有的<a href=\"https://zh.wikipedia.org/wiki/%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1\">无线网卡</a>上，但未必能用在第一代的<a href=\"https://zh.wikipedia.org/wiki/%E7%84%A1%E7%B7%9A%E6%8E%A5%E5%85%A5%E9%BB%9E\">无线接入点</a>上。</p>\n<ul>\n<li><strong>可靠的密码保护</strong></li>\n</ul>\n<p>WPA3-Enterprise 将加密扩展到 192 位（WPA3-Personal 下为 128 位加密），以增强密码强度。它可以防止弱密码通过猜测易被破解。</p>\n<ul>\n<li><strong>保护您的网络设备</strong></li>\n</ul>\n<p>WPA3 将 WPA2 预共享密钥（PSK）替换为 Equals（SAE）的同时身份验证，以避免像 KRACK 那样的密钥重新安装攻击。它将保护您的网络设备在连接到无线接入点时安全。SAE 也是抵御离线字典攻击的有效防御手段。</p>\n<ul>\n<li><strong>公共区域的安全连接</strong></li>\n</ul>\n<p>尽管攻击者获得了流量加密密钥，但使用 WPA3-Personal 很难计算流量使用和传输的数据。在开放网络上，SAE 提供了前向保密性和更多数据安全性的好处。WPA3 还提供受保护的管理框架（PMF），以避免从公共区域偷听和伪造。</p>\n<h2 id=\"country_code\"><a class=\"anchor\" href=\"#country_code\">#</a> Country_code</h2>\n<h3 id=\"japan\"><a class=\"anchor\" href=\"#japan\">#</a> <a href=\"https://github.com/Jm-Taylor/RPI-5Ghz-Config#japan\">Japan</a></h3>\n<p>Country Code: <strong>JP3</strong></p>\n<p>Valid Channels: <strong>36(idx 38), 40(idx 38), 44(idx 46)</strong></p>\n<p>country JP: DFS-JP</p>\n<ul>\n<li>(2402 - 2482 @ 40), (N/A, 20), (N/A)</li>\n<li>(2474 - 2494 @ 20), (N/A, 20), (N/A), NO-OFDM</li>\n<li>(4910 - 4990 @ 40), (N/A, 23), (N/A)</li>\n<li>(5030 - 5090 @ 40), (N/A, 23), (N/A)</li>\n<li>(5170 - 5250 @ 80), (N/A, 20), (N/A), AUTO-BW</li>\n<li>(5250 - 5330 @ 80), (N/A, 20), (0 ms), DFS, AUTO-BW</li>\n<li>(5490 - 5710 @ 160), (N/A, 23), (0 ms), DFS</li>\n<li>(59000 - 66000 @ 2160), (N/A, 10), (N/A)</li>\n</ul>\n<h1 id=\"煞笔集锦\"><a class=\"anchor\" href=\"#煞笔集锦\">#</a> 煞笔集锦</h1>\n<h2 id=\"2023年10月9日\"><a class=\"anchor\" href=\"#2023年10月9日\">#</a> 2023 年 10 月 9 日：</h2>\n<p>配置 dth0 静态 ip 的时候，写成 static_ip_address</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>interface eth0 </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>static <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.0.10/24</pre></td></tr></table></figure><h2 id=\"2023年10月17日\"><a class=\"anchor\" href=\"#2023年10月17日\">#</a> 2023 年 10 月 17 日：</h2>\n<p>重启 hostapd 的时候，相信 CHATGPT，导致配置文件被删除</p>\n<ol>\n<li>\n<p>Unmask the  <code>hostapd</code>  service using the following command:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>bashCopy code</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> systemctl unmask hostapd</pre></td></tr></table></figure></li>\n<li>\n<p>After unmasking the service, try restarting it again:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>bashCopy code</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> systemctl restart hostapd</pre></td></tr></table></figure></li>\n</ol>\n<p>This should allow the  <code>hostapd</code>  service to restart without the &quot;masked&quot; error. If you continue to face issues, make sure that your  <code>hostapd</code>  configuration is correct and that your system's configuration for  <code>hostapd</code>  is in order.</p>\n<h1 id=\"配置树莓派的步骤\"><a class=\"anchor\" href=\"#配置树莓派的步骤\">#</a> 配置树莓派的步骤：</h1>\n<h2 id=\"更新库\"><a class=\"anchor\" href=\"#更新库\">#</a> 更新库</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> upgrade</pre></td></tr></table></figure><h2 id=\"为无线接口配置静态ip\"><a class=\"anchor\" href=\"#为无线接口配置静态ip\">#</a> 为无线接口配置静态 IP</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/dhcpcd.config</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 添加 wlan1 的接口信息（因为我们使用 external NIC 作为无线网卡，所以接口不是树莓派板载的 wlan0，而是使用 wlan1，通常为了防止干扰会禁用 wlan0）</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>interface wlan1</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>static <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.11.1/24 //任意IP地址都可以，但是不要重复！</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>denyinterfaces eth0</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>denyinterfaces wlan1</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># denyinterfaces eth0：禁止 eth0 接口使用 DHCP 客户端。其实不写也没问题，因为在上边的步骤中我们给树莓派分配了 eth0 的静态 IP, 写不写 DHCP 服务都不会生效。</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># denyinterfaces wlan1：禁止 wlan0 接口使用 DHCP 客户端。这意味着树莓派上的 wlan0 接口将不会尝试通过 DHCP 协议来获取 IP 地址。</span></pre></td></tr></table></figure><h2 id=\"安装hostapddnsmasq-dhcpcd\"><a class=\"anchor\" href=\"#安装hostapddnsmasq-dhcpcd\">#</a> 安装 hostapd，dnsmasq, dhcpcd</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> hostapd</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> dnsmasq</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> dhcpcd</pre></td></tr></table></figure><h2 id=\"配置dhcpcdconf\"><a class=\"anchor\" href=\"#配置dhcpcdconf\">#</a> 配置 dhcpcd.conf</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>interface wlan1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>static <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.11.1/24 //任意IP地址都可以，但是不要重复！</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># denyinterfaces eth0</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># denyinterfaces wlan0 (可选)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># denyinterfaces eth0：禁止 eth0 接口使用 DHCP 客户端。其实不写也没问题，因为在上边的步骤中我们给树莓派分配了 eth0 的静态 IP, 写不写 DHCP 服务都不会生效。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># denyinterfaces wlan1：禁止 wlan0 接口使用 DHCP 客户端。这意味着树莓派上的 wlan0 接口将不会尝试通过 DHCP 协议来获取 IP 地址。</span></pre></td></tr></table></figure><h2 id=\"将dnsmasq配置文件重命名并编写一个新配置文件\"><a class=\"anchor\" href=\"#将dnsmasq配置文件重命名并编写一个新配置文件\">#</a> 将 dnsmasq 配置文件重命名并编写一个新配置文件</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> /etc/dnsmasq.conf /etc/dnsmasq.conf.orig</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/dnsmasq.conf</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># mv: 是 \"move\"（移动）的缩写，用于移动或重命名文件。</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#/etc/dnsmasq.conf: 是要移动或重命名的目标文件的路径。</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">#/etc/dnsmasq.conf.orig: 是目标文件的新路径和名称。</span></pre></td></tr></table></figure><h2 id=\"新的dnsmasqconfig文件中添加如下\"><a class=\"anchor\" href=\"#新的dnsmasqconfig文件中添加如下\">#</a> 新的 dnsmasq.config 文件中添加如下</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">interface</span><span class=\"token operator\">=</span>wlan1 <span class=\"token comment\">#这里表示 dnsmasq 要监听的接口，我们使用的是 wlan1 接口</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  dhcp-range<span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.11.10,192.168.11.100,255.255.255.0,24h</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 这里定义了分配的 IP 地址范围</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 192：常见的家庭网络标识号</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 168.11：子网号</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 10：具体的主机</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 要保持分配的 IP 地址的子网号与 wlan1 的相同，同时不能包含 wlan1 的主机号，避免冲突</span></pre></td></tr></table></figure><h2 id=\"如何让树莓派重新联网\"><a class=\"anchor\" href=\"#如何让树莓派重新联网\">#</a> 如何让树莓派重新联网</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/network/interfaces</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>auto wlan0</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>iface wlan inet dhcp</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    wpa-ssid Wifiname</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    wpa-psk Wifipassword</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#开启接口</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">ifup</span> wlan0</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">#关闭接口</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">ifdown</span> wlan0</pre></td></tr></table></figure><h2 id=\"wlan0没有在ifconfig里显示出来\"><a class=\"anchor\" href=\"#wlan0没有在ifconfig里显示出来\">#</a> wlan0 没有在 ifconfig 里显示出来：</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">ifconfig</span> wlan0 up</pre></td></tr></table></figure><h1 id=\"it用语辞典\"><a class=\"anchor\" href=\"#it用语辞典\">#</a> IT 用语辞典：</h1>\n<p>バンド幅 Channl width</p>\n<p>MHZ メガヘルツ</p>\n<p>GHz  ギガヘルツ</p>\n<p>802.11ax アイトリプルイー はちまるに   ドット  イレブン エーエックス</p>\n<p>thoughput スループット</p>\n<p><em>RSS</em> 信号强度</p>\n<p><a href=\"https://e-words.jp/w/IEEE_802.11ax.html\">IEEE 802.11ax（Wi-Fi 6 / 11ax）とは - 意味をわかりやすく - IT 用語辞典 e-Words</a></p>\n<p><a href=\"https://www.freecodecamp.org/chinese/news/osi-model-networking-layers/\">白话 OSI 七层网络模型 (freecodecamp.org)</a></p>\n",
            "tags": [
                "学术垃圾清理",
                "学术垃圾"
            ]
        },
        {
            "id": "http://kotokusunao.com/2023/02/02/DedicatedServerBuilding/DedicatedServerWOW/",
            "url": "http://kotokusunao.com/2023/02/02/DedicatedServerBuilding/DedicatedServerWOW/",
            "title": "如何搭建属于自己的魔兽私服",
            "date_published": "2023-02-01T15:00:00.000Z",
            "content_html": "<h1 id=\"在开始之前\"><a class=\"anchor\" href=\"#在开始之前\">#</a> 在开始之前：</h1>\n<p>若想搭建魔兽私服，首先需要准备：</p>\n<ol>\n<li>云服务器（有条件可以本地服务器）</li>\n<li>合适的开服版本（推荐去藏宝湾寻找，本次以魔兽逍遥 335 渐变版和魔兽养老院第七版微变为例）</li>\n<li>如果下载一键端那么需要客户端 + 服务端</li>\n<li>合适的时间</li>\n</ol>\n<h1 id=\"魔兽逍遥335渐变版\"><a class=\"anchor\" href=\"#魔兽逍遥335渐变版\">#</a> 魔兽逍遥 335 渐变版</h1>\n<p>一切准备就绪，那么即刻开始配置。</p>\n<p>我使用的是腾讯云（WIndows sever 2022 中文版），首先登录腾讯云并且下载所需文件。</p>\n<p>首先确保服务端路径都是英文，点击进入服务端所在文件夹，双击运行逍遥魔兽一键端。</p>\n<p>运行一键端程序，先在 “架设及系统设置” 面板中设置客户端登录器的路径，点击 “打开” 按钮，找到客户端目录下的 “逍遥魔兽登录器.bat” 文件后，点确定，再点击 “保存设置” 按钮即可完成。然后点击左侧 “一键启动服务端” 按钮，即可方便的启动服务端，等到 worldserver 面板中出现 “ready...” 字样，同时听到电脑发出嘟的一声，代表服务端启动成功，最后点击 “一键启动客户端”，即可进入游戏。</p>\n<p>如果一键端工具运行时出现问题，比如启动服务端后，worldserver 面板没有任何显示，请检查一下地图文件是否下载并放置正确，另外，把之前安装过的 VS2013 运行库删除，再重新安装一下 “架设及系统设置” 面板里提供的 VS2013 运行库，64 位系统请把两个版本的都安装一次。在运行一键端工具时，最好能右键一键端程序，选择用管理员身份运行。如果使用中需要重启服务端的话，再次点击 “一键启动服务端” 按钮即可。</p>\n<p>等待 worldserver 窗口处显示：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>XYWOWCore rev<span class=\"token operator\">.</span>  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>Win32<span class=\"token punctuation\">,</span> Release<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>worldserver<span class=\"token operator\">-</span>daemon<span class=\"token punctuation\">)</span> ready<span class=\"token operator\">...</span></pre></td></tr></table></figure><p>这说明本地服务器架设完毕，马上就成功了！</p>\n<p><img loading=\"lazy\" data-src=\"https://raw.githubusercontent.com/Orangenazuna/Blog-pictures/main/dedicated%20server/image-20240203000155356.png\" alt=\"image-20240203000155356\" /></p>\n<p>如果报错，说明系统环境缺失，一般只需要<strong> DirectX 修复</strong>，这里附上修复工具地址：<a href=\"https://down.gamersky.com/pc/202207/1501201.shtml\">DirectX 修复工具 - 游民星空下载中心 (gamersky.com)</a></p>\n<p>接下来，需要打开本地 8085 和 4127 两个端口，一个负责数据交互一个负责账户登录。</p>\n<p>在 WIndows 搜索栏中搜索防火墙 -&gt; 高级设置 -&gt; 入站规则，右侧点击新建规则，同时不要忘记在云服务器的控制台上也将端口开放。</p>\n<p>回到<strong>客户端</strong>，打开 <code>realmlist.wtf</code>  文件，将 <code>set realmlist</code>   后面的改为服务器的 IP 地址，例如 <code>set realmlist  127.0.0.1</code></p>\n<p>就可以点击 WOW.exe 进行快乐玩耍了。</p>\n<p>或者说同时玩多个自建服怎么办呢，就只需写一个脚本，命名为 XXX 登录器.bat 即可，内容如下。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span> not exist <span class=\"token string double-quoted-string\">\"WTF\"</span> md <span class=\"token string double-quoted-string\">\"WTF\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> <span class=\"token keyword\">echo</span> set realmlist <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">></span>realmlist<span class=\"token operator\">.</span><span class=\"token constant\">WTF</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> <span class=\"token keyword\">echo</span> set realmlist <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">></span>data<span class=\"token operator\">/</span>enGB<span class=\"token operator\">/</span>realmlist<span class=\"token operator\">.</span><span class=\"token constant\">WTF</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre> <span class=\"token keyword\">echo</span> set realmlist <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">></span>data<span class=\"token operator\">/</span>zhcn<span class=\"token operator\">/</span>realmlist<span class=\"token operator\">.</span><span class=\"token constant\">WTF</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre> start wow<span class=\"token operator\">.</span>exe</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> <span class=\"token keyword\">goto</span> end</pre></td></tr></table></figure><p>其中的 IP 地址改为服务器 IP 地址即可。</p>\n<h1 id=\"魔兽养老院第七版微变\"><a class=\"anchor\" href=\"#魔兽养老院第七版微变\">#</a> 魔兽养老院第七版微变</h1>\n<p>一键架设服务器后，是不是觉得特别简单。当然，如果自己心仪的版本没有一键怎么办，那就看看魔兽养老院第七版如何架设吧。</p>\n<p>此版本是基于纯净版 335 魔兽的修改，所以首先下载纯净 335 作为预备。</p>\n<p>养老院版下载好后，会有两个文件夹， <code>dengluqi</code>  和 <code>HX-FZW</code> ，首先来看 <code>HX-FZW。</code></p>\n<h2 id=\"第一步\"><a class=\"anchor\" href=\"#第一步\">#</a> 第一步</h2>\n<p>打开 \\phpStudy\\phpStudy.exe，确保 Apache 和 MySQL 都是启动状态</p>\n<p><img loading=\"lazy\" data-src=\"https://raw.githubusercontent.com/Orangenazuna/Blog-pictures/main/dedicated%20server/image-20240203002853569.png\" alt=\"image-20240203002853569\" /></p>\n<h2 id=\"第二步\"><a class=\"anchor\" href=\"#第二步\">#</a> <strong><strong>第二步</strong></strong></h2>\n<p>打开 \\ 网关 new\\ 登录器网关.exe，点击启动服务。</p>\n<p><img loading=\"lazy\" data-src=\"https://raw.githubusercontent.com/Orangenazuna/Blog-pictures/main/dedicated%20server/image-20240203003015815.png\" alt=\"image-20240203003015815\" /></p>\n<h2 id=\"第三步\"><a class=\"anchor\" href=\"#第三步\">#</a> <strong><strong>第三步</strong></strong></h2>\n<p>运行 \\Core\\335 文件夹下的 authserver.exe 与 worldserver.exe. 窗口不能关闭</p>\n<p>在 worldserver.exe 框中输入 account create 账号 密码</p>\n<p>在 worldserver.exe 框中输入  account set gmlevel 账号 3 -1</p>\n<h2 id=\"第四步\"><a class=\"anchor\" href=\"#第四步\">#</a> 第四步</h2>\n<ol>\n<li>需要 N11 或者 Navicat 等工具连接数据库</li>\n<li>连接 - MySQL-IP 默认地址 - 端口 3306 - 用户名 root - 密码 root 注意：这些都是安装 MySQL 的设置</li>\n<li>打开表 acore_auth-realmlist - 修改 address 键为你的 IP - 保存</li>\n<li>重新打开服务器，在 authserver.exe 的框里看到 Added realm “服务器名” at IP:8085 证明你数据库里的 IP 已经修改成功</li>\n</ol>\n<h2 id=\"第五步可略过有待考证\"><a class=\"anchor\" href=\"#第五步可略过有待考证\">#</a> 第五步（可略过，有待考证）</h2>\n<ol>\n<li>安装小皮面板 <a href=\"https://www.xp.cn/windows-panel.html\">下载链接</a> [注意：仅是我个人比较喜欢使用，可自行更换]</li>\n<li>进入小皮后台 软件管理 - php7.3.4 - 设置 - 拓展管理 -<strong>GMP 启用</strong></li>\n<li>github 获取网站源码 <a href=\"https://github.com/masterking32/WoWSimpleRegistration\">下载链接</a></li>\n<li>进入小皮后台 安装网站 [注意：如果没有域名可安装，直接将网站复到..\\localhost_80\\wwwroot\\ 文件夹内输入 IP 浏览]</li>\n<li>修改..\\application\\config\\config.php 配置</li>\n<li>配置如下：</li>\n</ol>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>* @author Amin Mahmoudi (MasterkinG)</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>* [url=home.php?mod=space&amp;uid=761663]@copyright[/url]    Copyright (c) 2019 - 2021, MasterkinG32. (https://masterking32.com)</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>* [url=home.php?mod=space&amp;uid=134709]@link[/url]    https://masterking32.com</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>* @Description : It's not masterking32 framework !</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>**/</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>baseurl</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    That's your website URL. Example: \"https://DOMAIN.COM\"</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>page_title</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    That's your website title. Example: \"My WOW Private server!\"</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>language</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    Default website language (english/persian/italian/chinese-simplified/chinese-traditional/swedish/french/german/spanish/korean/russian)</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>supported_langs</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        List of languages supported, You can remove each language you don't want!</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        if you want to disable language changer, Change it to: $config['supported_langs'] = false;</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'baseurl'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"你的域名\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;font color=\"#ff0000\"> 格式：https://www.iopq.net/&lt;/font></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'page_title'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"Simple Register\"</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 网站标题，自己喜欢就好 & lt;/font></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'language'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"chinese-simplified\"</span><span class=\"token punctuation\">;</span><span class=\"token operator\">&lt;</span>span style<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"color: rgb(255, 0, 0);\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 语言，我已经默认中文了 & lt;/span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'supported_langs'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token string single-quoted-string\">'english'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'English'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token string single-quoted-string\">'persian'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Persian'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token string single-quoted-string\">'italian'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Italian'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token string single-quoted-string\">'chinese-simplified'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Chinese Simplified'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token string single-quoted-string\">'chinese-traditional'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Chinese Traditional'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token string single-quoted-string\">'swedish'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Swedish'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token string single-quoted-string\">'french'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'French'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token string single-quoted-string\">'german'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'German'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token string single-quoted-string\">'spanish'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Spanish'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token string single-quoted-string\">'korean'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Korean'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token string single-quoted-string\">'russian'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Russian'</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>If you see a white screen or have an issue, you can enable it to see the errors.</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>Note that after testing, be sure to disable this option.</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'debug_mode'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ENABLE Debug mode if you got blank screen or 503 error, to see what happen?</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>Your server information.</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>realmlist</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    Server Realmlist</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>patch_location</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    If have patch set URL to download our patch here or make that empty</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>game_version</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    Your game version</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'realmlist'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'IP'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 你的服务器 IP 格式 192.168.0.1&lt;/font></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'patch_location'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'http://mypatch.com/patch.mpq'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'game_version'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'3.3.5a (12340)'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>Select your server expansion.</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>If you want to use advance template, Your images and backgrounds will be changed for your expansion.</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>0 = Classic</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>1 = The Burning Crusade (TBC)</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>2 = Wrath of the Lich King (WotLK)</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>3 = Cataclysm</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>4 = Mist of Pandaria (MOP)</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>5 = Warlords of Draenor (WOD)</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>6 = Legion</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>7 = BFA (I'm not sure about this one!)</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'expansion'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'2'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 游戏版本，2 代表 WLK3.3.5，如果选 1TBC，那么你注册后没有 DK 角色选择 & lt;/font></span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"67\"></td><td><pre>Core Type:</pre></td></tr><tr><td data-num=\"68\"></td><td><pre>0 = TrinityCore</pre></td></tr><tr><td data-num=\"69\"></td><td><pre>1 = AzerothCore</pre></td></tr><tr><td data-num=\"70\"></td><td><pre>2 = AshamaneCore</pre></td></tr><tr><td data-num=\"71\"></td><td><pre>3 = Skyfire Project</pre></td></tr><tr><td data-num=\"72\"></td><td><pre>4 = OregonCore</pre></td></tr><tr><td data-num=\"73\"></td><td><pre>5 = CMangos</pre></td></tr><tr><td data-num=\"74\"></td><td><pre>10 = etc</pre></td></tr><tr><td data-num=\"75\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'server_core'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 游戏核心，1 代表 AzerothCore，上面可以看到他兼容很多核心 & lt;/font></span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"78\"></td><td><pre>If your server is WoD/Legion/BFA you should enable it!</pre></td></tr><tr><td data-num=\"79\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'battlenet_support'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span><span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 如果是 AZ 核心必须为否，并提示你 PHP 的 GMP 必须开启 & lt;/font></span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"82\"></td><td><pre>If your core password encryption is SRP6, you need to enable it.</pre></td></tr><tr><td data-num=\"83\"></td><td><pre>For the last versions of the TrinityCore(3.3.5/master)/AzerothCore, you need to enable it. https://git.io/JJRH4 and https://git.io/JJrxq</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>Enable that if you use the last version of TC.</pre></td></tr><tr><td data-num=\"85\"></td><td><pre>For old versions, Make sure this feature is disabled.</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>You need to enable the GMP extension for PHP.</pre></td></tr><tr><td data-num=\"87\"></td><td><pre>=====================================================================</pre></td></tr><tr><td data-num=\"88\"></td><td><pre>***************** GMP REQUIRED ********************</pre></td></tr><tr><td data-num=\"89\"></td><td><pre>******Uncomment extension=gmp in your php.ini******</pre></td></tr><tr><td data-num=\"90\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'srp6_support'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// READ COMMENTS, [Please ENABLE GMP]</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"93\"></td><td><pre>If you have an issue with top players or online players you can disable them!</pre></td></tr><tr><td data-num=\"94\"></td><td><pre>disable_top_players</pre></td></tr><tr><td data-num=\"95\"></td><td><pre>    Disable server top players page [true: Hide top players page]</pre></td></tr><tr><td data-num=\"96\"></td><td><pre>disable_online_players</pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    Disable online players page [true: Hide online players page]</pre></td></tr><tr><td data-num=\"98\"></td><td><pre>disable_changepassword</pre></td></tr><tr><td data-num=\"99\"></td><td><pre>    Disable change password</pre></td></tr><tr><td data-num=\"100\"></td><td><pre>    Change this to true, If you are using SOAP for registration.</pre></td></tr><tr><td data-num=\"101\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'disable_top_players'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'disable_online_players'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'disable_changepassword'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"106\"></td><td><pre>Allow to users make account with an email for several accounts (Just work for non-battle.net servers)</pre></td></tr><tr><td data-num=\"107\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'multiple_email_use'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"110\"></td><td><pre>Template name, You can change it to:</pre></td></tr><tr><td data-num=\"111\"></td><td><pre>light</pre></td></tr><tr><td data-num=\"112\"></td><td><pre>advance</pre></td></tr><tr><td data-num=\"113\"></td><td><pre>icecrown</pre></td></tr><tr><td data-num=\"114\"></td><td><pre>kaelthas</pre></td></tr><tr><td data-num=\"115\"></td><td><pre>battleforazeroth</pre></td></tr><tr><td data-num=\"116\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'template'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'light'</span><span class=\"token punctuation\">;</span><span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 选择你喜欢的模板，我默认 light 了 & lt;/font></span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"119\"></td><td><pre>SMTP config.</pre></td></tr><tr><td data-num=\"120\"></td><td><pre>We need this part to send an email. (used for restore password and 2FA)</pre></td></tr><tr><td data-num=\"121\"></td><td><pre>You can use your own SMTP or Gmail/Yahoo/Hotmail and etc</pre></td></tr><tr><td data-num=\"122\"></td><td><pre>smtp_host</pre></td></tr><tr><td data-num=\"123\"></td><td><pre>    Specify main and backup SMTP servers</pre></td></tr><tr><td data-num=\"124\"></td><td><pre>smtp_port</pre></td></tr><tr><td data-num=\"125\"></td><td><pre>    TCP port to connect to</pre></td></tr><tr><td data-num=\"126\"></td><td><pre>smtp_auth</pre></td></tr><tr><td data-num=\"127\"></td><td><pre>    Enable SMTP authentication</pre></td></tr><tr><td data-num=\"128\"></td><td><pre>smtp_user</pre></td></tr><tr><td data-num=\"129\"></td><td><pre>    SMTP username</pre></td></tr><tr><td data-num=\"130\"></td><td><pre>smtp_pass</pre></td></tr><tr><td data-num=\"131\"></td><td><pre>    SMTP password</pre></td></tr><tr><td data-num=\"132\"></td><td><pre>smtp_secure</pre></td></tr><tr><td data-num=\"133\"></td><td><pre>    Enable TLS encryption, `ssl` also accepted</pre></td></tr><tr><td data-num=\"134\"></td><td><pre>smtp_mail</pre></td></tr><tr><td data-num=\"135\"></td><td><pre>    Send emails by ...</pre></td></tr><tr><td data-num=\"136\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'smtp_host'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'smtp1.example.com'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'smtp_port'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">587</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'smtp_auth'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'smtp_user'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'user@example.com'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'smtp_pass'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'SECRET'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'smtp_secure'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'tls'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'smtp_mail'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'no-reply@example.com'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"145\"></td><td><pre>vote_system</pre></td></tr><tr><td data-num=\"146\"></td><td><pre>    You can enable/disable vote system.</pre></td></tr><tr><td data-num=\"147\"></td><td><pre>    Vote system is a simple and don't have postback or something like that to verify the votes</pre></td></tr><tr><td data-num=\"148\"></td><td><pre>    If you use Cloudflare and you have issue with IPs and voting, Read this: https://support.cloudflare.com/hc/en-us/articles/200170786</pre></td></tr><tr><td data-num=\"149\"></td><td><pre>vote_sites</pre></td></tr><tr><td data-num=\"150\"></td><td><pre>    Your vote sites and images, must be array.</pre></td></tr><tr><td data-num=\"151\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'vote_system'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'vote_sites'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>    <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre>        <span class=\"token string single-quoted-string\">'image'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'http://www.top100arena.com/hit.asp?id=93137&amp;c=WoW&amp;t=2'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre>        <span class=\"token string single-quoted-string\">'site_url'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'http://www.top100arena.com/in.asp?id=93137'</span></pre></td></tr><tr><td data-num=\"157\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre>    <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"159\"></td><td><pre>        <span class=\"token string single-quoted-string\">'image'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'https://topg.org/topg.gif'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre>        <span class=\"token string single-quoted-string\">'site_url'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'https://topg.org/wow-private-servers/in-479394'</span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre>    <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"163\"></td><td><pre>        <span class=\"token string single-quoted-string\">'image'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'http://www.xtremeTop100.com/votenew.jpg'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"164\"></td><td><pre>        <span class=\"token string single-quoted-string\">'site_url'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'http://www.xtremetop100.com/in.php?site=1132364316'</span></pre></td></tr><tr><td data-num=\"165\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"166\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"167\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"168\"></td><td><pre>You can use Image captcha or HCaptcha or Recaptcha v2.</pre></td></tr><tr><td data-num=\"169\"></td><td><pre>If you want to use Recaptcha v2 or HCaptcha required to enable cURL in your PHP.</pre></td></tr><tr><td data-num=\"170\"></td><td><pre>** We recommend using HCaptcha. **</pre></td></tr><tr><td data-num=\"171\"></td><td><pre>captcha_type</pre></td></tr><tr><td data-num=\"172\"></td><td><pre>    0) Image Captcha</pre></td></tr><tr><td data-num=\"173\"></td><td><pre>    1) HCaptcha</pre></td></tr><tr><td data-num=\"174\"></td><td><pre>    2) ReCaptcha v2</pre></td></tr><tr><td data-num=\"175\"></td><td><pre>    +2) Disable captcha. (DON'T DO THAT!)</pre></td></tr><tr><td data-num=\"176\"></td><td><pre>For image captcha, you don't need to put anything for captcha_key captcha_secret or captcha_language.</pre></td></tr><tr><td data-num=\"177\"></td><td><pre>captcha_secret/captcha_secret</pre></td></tr><tr><td data-num=\"178\"></td><td><pre>    To get key and secret for HCaptcha go to https://hCaptcha.com/?r=6d4f9117ba12</pre></td></tr><tr><td data-num=\"179\"></td><td><pre>    To get key and secret for Recaptcha go to https://www.google.com/recaptcha</pre></td></tr><tr><td data-num=\"180\"></td><td><pre>captcha_language</pre></td></tr><tr><td data-num=\"181\"></td><td><pre>    https://docs.hcaptcha.com/languages</pre></td></tr><tr><td data-num=\"182\"></td><td><pre>    https://developers.google.com/recaptcha/docs/language</pre></td></tr><tr><td data-num=\"183\"></td><td><pre>=====================================================================</pre></td></tr><tr><td data-num=\"184\"></td><td><pre>******Uncomment extension=gd2 in your php.ini******</pre></td></tr><tr><td data-num=\"185\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"186\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'captcha_type'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"187\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'captcha_key'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"188\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'captcha_secret'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"189\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'captcha_language'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'en'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"190\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"191\"></td><td><pre>soap_for_register</pre></td></tr><tr><td data-num=\"192\"></td><td><pre>    Don't Enable it for AzerothCore/TrinityCore/SkyFire and AshamaneCore.</pre></td></tr><tr><td data-num=\"193\"></td><td><pre>    If you enable that you need to disabled change password feature.</pre></td></tr><tr><td data-num=\"194\"></td><td><pre>    If you want to enable Two-Factor Authentication (2FA) you don't need to enable this option.</pre></td></tr><tr><td data-num=\"195\"></td><td><pre>    For Two-Factor Authentication (2FA)  just need to config other parts of the SOAP.</pre></td></tr><tr><td data-num=\"196\"></td><td><pre></pre></td></tr><tr><td data-num=\"197\"></td><td><pre>SOAP features need to enable soap in your PHP.</pre></td></tr><tr><td data-num=\"198\"></td><td><pre></pre></td></tr><tr><td data-num=\"199\"></td><td><pre>soap_host</pre></td></tr><tr><td data-num=\"200\"></td><td><pre>    SOAP server address</pre></td></tr><tr><td data-num=\"201\"></td><td><pre>soap_port</pre></td></tr><tr><td data-num=\"202\"></td><td><pre>    SOAP server port.</pre></td></tr><tr><td data-num=\"203\"></td><td><pre>soap_uri</pre></td></tr><tr><td data-num=\"204\"></td><td><pre>    urn:TC for TrinityCore</pre></td></tr><tr><td data-num=\"205\"></td><td><pre>    urn:AC for AzerothCore</pre></td></tr><tr><td data-num=\"206\"></td><td><pre>    urn:MaNGOS for Mangos</pre></td></tr><tr><td data-num=\"207\"></td><td><pre>soap_style</pre></td></tr><tr><td data-num=\"208\"></td><td><pre>    SOAP style</pre></td></tr><tr><td data-num=\"209\"></td><td><pre>soap_username</pre></td></tr><tr><td data-num=\"210\"></td><td><pre>    SOAP account username</pre></td></tr><tr><td data-num=\"211\"></td><td><pre>soap_password</pre></td></tr><tr><td data-num=\"212\"></td><td><pre>    SOAP account password</pre></td></tr><tr><td data-num=\"213\"></td><td><pre>soap_ca_command</pre></td></tr><tr><td data-num=\"214\"></td><td><pre>    Create account command</pre></td></tr><tr><td data-num=\"215\"></td><td><pre>    You can use it like this too: '.account create &#123;USERNAME&#125; &#123;PASSWORD&#125; &#123;PASSWORD&#125; &#123;EMAIL&#125;'</pre></td></tr><tr><td data-num=\"216\"></td><td><pre>    Check create account command in your server!</pre></td></tr><tr><td data-num=\"217\"></td><td><pre>soap_cp_command</pre></td></tr><tr><td data-num=\"218\"></td><td><pre>    Change password command</pre></td></tr><tr><td data-num=\"219\"></td><td><pre>    account set password &#123;USERNAME&#125; &#123;PASSWORD&#125; &#123;PASSWORD&#125;</pre></td></tr><tr><td data-num=\"220\"></td><td><pre>    Check change password command in your server</pre></td></tr><tr><td data-num=\"221\"></td><td><pre>soap_asa_command</pre></td></tr><tr><td data-num=\"222\"></td><td><pre>    If you use soap_for_register, You need to set this command.</pre></td></tr><tr><td data-num=\"223\"></td><td><pre>    This command will be run after soap_ca_command.</pre></td></tr><tr><td data-num=\"224\"></td><td><pre>    If you don't want to run any command after soap_ca_command you can make it empty like this: ''</pre></td></tr><tr><td data-num=\"225\"></td><td><pre>    account set addon &#123;USERNAME&#125; &#123;EXPANSION&#125;</pre></td></tr><tr><td data-num=\"226\"></td><td><pre>=====================================================================</pre></td></tr><tr><td data-num=\"227\"></td><td><pre>******Uncomment extension=soap in your php.ini******</pre></td></tr><tr><td data-num=\"228\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"229\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_for_register'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"230\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_host'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'127.0.0.1'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"231\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_port'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'7878'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"232\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_uri'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'urn:MaNGOS'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"233\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_style'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'SOAP_RPC'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"234\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_username'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'admin_soap'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"235\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_password'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'admin_soap'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"236\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_ca_command'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'account create &#123;USERNAME&#125; &#123;PASSWORD&#125;'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"237\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_cp_command'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'account set password &#123;USERNAME&#125; &#123;PASSWORD&#125; &#123;PASSWORD&#125;'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"238\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_asa_command'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'account set addon &#123;USERNAME&#125; &#123;EXPANSION&#125;'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"239\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"240\"></td><td><pre>Two-Factor Authentication (2FA)</pre></td></tr><tr><td data-num=\"241\"></td><td><pre>Your core must support 2fa.</pre></td></tr><tr><td data-num=\"242\"></td><td><pre>This feature just works for cores that have 2fa command.</pre></td></tr><tr><td data-num=\"243\"></td><td><pre>If your core support 2fa but don't have any command, you can check this: https://github.com/masterking32/WoWSimpleRegistration/pull/20 (Support some of the cores, Required to use 2fa for registration.)</pre></td></tr><tr><td data-num=\"244\"></td><td><pre></pre></td></tr><tr><td data-num=\"245\"></td><td><pre>You need to config SOAP too but you don't need to enable 'soap_for_register'.</pre></td></tr><tr><td data-num=\"246\"></td><td><pre>For security reasons, We used email to enable 2fa, You need to enable SMTP config.</pre></td></tr><tr><td data-num=\"247\"></td><td><pre></pre></td></tr><tr><td data-num=\"248\"></td><td><pre>2fa_support</pre></td></tr><tr><td data-num=\"249\"></td><td><pre>    You can enable or disable it. (true/false)</pre></td></tr><tr><td data-num=\"250\"></td><td><pre>soap_2d_command</pre></td></tr><tr><td data-num=\"251\"></td><td><pre>    Command to disable 2fa.</pre></td></tr><tr><td data-num=\"252\"></td><td><pre>    account set 2fa &#123;USERNAME&#125; off</pre></td></tr><tr><td data-num=\"253\"></td><td><pre>soap_2e_command</pre></td></tr><tr><td data-num=\"254\"></td><td><pre>    Command to enable 2fa.</pre></td></tr><tr><td data-num=\"255\"></td><td><pre>    account set 2fa &#123;USERNAME&#125; &#123;SECRET&#125;</pre></td></tr><tr><td data-num=\"256\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"257\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'2fa_support'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"258\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_2d_command'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'account set 2fa &#123;USERNAME&#125; off'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"259\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'soap_2e_command'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'account set 2fa &#123;USERNAME&#125; &#123;SECRET&#125;'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"260\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"261\"></td><td><pre>You Auth/Realmd MySQL information.</pre></td></tr><tr><td data-num=\"262\"></td><td><pre>db_auth_host</pre></td></tr><tr><td data-num=\"263\"></td><td><pre>    Auth Database Host</pre></td></tr><tr><td data-num=\"264\"></td><td><pre>db_auth_port</pre></td></tr><tr><td data-num=\"265\"></td><td><pre>    Auth Database Port</pre></td></tr><tr><td data-num=\"266\"></td><td><pre>db_auth_user</pre></td></tr><tr><td data-num=\"267\"></td><td><pre>    Auth Database Username</pre></td></tr><tr><td data-num=\"268\"></td><td><pre>db_auth_pass</pre></td></tr><tr><td data-num=\"269\"></td><td><pre>    Auth Database Password</pre></td></tr><tr><td data-num=\"270\"></td><td><pre>db_auth_dbname</pre></td></tr><tr><td data-num=\"271\"></td><td><pre>    Auth Database DBName</pre></td></tr><tr><td data-num=\"272\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"273\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'db_auth_host'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'127.0.0.1'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 数据库所在服务器的 IP&lt;/font></span></pre></td></tr><tr><td data-num=\"274\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'db_auth_port'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'3306'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 端口 & lt;/font></span></pre></td></tr><tr><td data-num=\"275\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'db_auth_user'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'root'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 账号 & lt;/font></span></pre></td></tr><tr><td data-num=\"276\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'db_auth_pass'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'root'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 密码 & lt;/font></span></pre></td></tr><tr><td data-num=\"277\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'db_auth_dbname'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'acore_auth'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;</span>font color<span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"#ff0000\"</span><span class=\"token operator\">></span><span class=\"token comment\">// 账号数据库的表名 & lt;/font></span></pre></td></tr><tr><td data-num=\"278\"></td><td><pre><span class=\"token comment\">/*===================================================================</pre></td></tr><tr><td data-num=\"279\"></td><td><pre>Your character's databases.</pre></td></tr><tr><td data-num=\"280\"></td><td><pre>If your server has a lot of realms you can check the example at the bottom of the file.</pre></td></tr><tr><td data-num=\"281\"></td><td><pre>=====================================================================*/</span></pre></td></tr><tr><td data-num=\"282\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'realmlists'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"283\"></td><td><pre>    <span class=\"token string double-quoted-string\">\"1\"</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"284\"></td><td><pre>        <span class=\"token string single-quoted-string\">'realmid'</span> <span class=\"token operator\">=></span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Realm ID</span></pre></td></tr><tr><td data-num=\"285\"></td><td><pre>        <span class=\"token string single-quoted-string\">'realmname'</span> <span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"NcwWow\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Realm Name</span></pre></td></tr><tr><td data-num=\"286\"></td><td><pre>        <span class=\"token string single-quoted-string\">'db_host'</span> <span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"127.0.0.1\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// MySQL Host IP</span></pre></td></tr><tr><td data-num=\"287\"></td><td><pre>        <span class=\"token string single-quoted-string\">'db_port'</span> <span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"3306\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// MySQL Host Port</span></pre></td></tr><tr><td data-num=\"288\"></td><td><pre>        <span class=\"token string single-quoted-string\">'db_user'</span> <span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"root\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// MySQL username</span></pre></td></tr><tr><td data-num=\"289\"></td><td><pre>        <span class=\"token string single-quoted-string\">'db_pass'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'root'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// MySQL password</span></pre></td></tr><tr><td data-num=\"290\"></td><td><pre>        <span class=\"token string single-quoted-string\">'db_name'</span> <span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"acore_characters\"</span> <span class=\"token comment\">// Characters database name</span></pre></td></tr><tr><td data-num=\"291\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"292\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"293\"></td><td><pre></pre></td></tr><tr><td data-num=\"294\"></td><td><pre><span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"295\"></td><td><pre>**********************************</pre></td></tr><tr><td data-num=\"296\"></td><td><pre>* EXMAPLE OF MORE THAN ONE REALM *</pre></td></tr><tr><td data-num=\"297\"></td><td><pre>**********************************</pre></td></tr><tr><td data-num=\"298\"></td><td><pre>&lt;font color=\"#ff0000\">// 下面可自定义服务器列表，多区显示 & lt;/font></pre></td></tr><tr><td data-num=\"299\"></td><td><pre>$config ['realmlists'] = array ( // Add your realmlist here</pre></td></tr><tr><td data-num=\"300\"></td><td><pre>    \"1\" => array (</pre></td></tr><tr><td data-num=\"301\"></td><td><pre>        'realmid' => 1,</pre></td></tr><tr><td data-num=\"302\"></td><td><pre>        'realmname' => \"Realm 1\",</pre></td></tr><tr><td data-num=\"303\"></td><td><pre>        'db_host' => \"127.0.0.1\",</pre></td></tr><tr><td data-num=\"304\"></td><td><pre>        'db_port' => \"3306\",</pre></td></tr><tr><td data-num=\"305\"></td><td><pre>        'db_user' => \"root\",</pre></td></tr><tr><td data-num=\"306\"></td><td><pre>        'db_pass' => \"root\",</pre></td></tr><tr><td data-num=\"307\"></td><td><pre>        'db_name' => \"rm1_chars\"</pre></td></tr><tr><td data-num=\"308\"></td><td><pre>    ),</pre></td></tr><tr><td data-num=\"309\"></td><td><pre>    \"2\" => array (</pre></td></tr><tr><td data-num=\"310\"></td><td><pre>        'realmid' => 2,</pre></td></tr><tr><td data-num=\"311\"></td><td><pre>        'realmname' => \"Realm 2\",</pre></td></tr><tr><td data-num=\"312\"></td><td><pre>        'db_host' => \"127.0.0.1\",</pre></td></tr><tr><td data-num=\"313\"></td><td><pre>        'db_port' => \"3306\",</pre></td></tr><tr><td data-num=\"314\"></td><td><pre>        'db_user' => \"root\",</pre></td></tr><tr><td data-num=\"315\"></td><td><pre>        'db_pass' => \"root\",</pre></td></tr><tr><td data-num=\"316\"></td><td><pre>        'db_name' => \"rm2_chars\"</pre></td></tr><tr><td data-num=\"317\"></td><td><pre>    ),</pre></td></tr><tr><td data-num=\"318\"></td><td><pre>    \"3\" => array (</pre></td></tr><tr><td data-num=\"319\"></td><td><pre>        'realmid' => 3,</pre></td></tr><tr><td data-num=\"320\"></td><td><pre>        'realmname' => \"Realm 3\",</pre></td></tr><tr><td data-num=\"321\"></td><td><pre>        'db_host' => \"127.0.0.1\",</pre></td></tr><tr><td data-num=\"322\"></td><td><pre>        'db_port' => \"3306\",</pre></td></tr><tr><td data-num=\"323\"></td><td><pre>        'db_user' => \"root\",</pre></td></tr><tr><td data-num=\"324\"></td><td><pre>        'db_pass' => \"root\",</pre></td></tr><tr><td data-num=\"325\"></td><td><pre>        'db_name' => \"rm3_chars\"</pre></td></tr><tr><td data-num=\"326\"></td><td><pre>    )</pre></td></tr><tr><td data-num=\"327\"></td><td><pre>);</pre></td></tr><tr><td data-num=\"328\"></td><td><pre>*/</span></pre></td></tr><tr><td data-num=\"329\"></td><td><pre></pre></td></tr><tr><td data-num=\"330\"></td><td><pre></pre></td></tr><tr><td data-num=\"331\"></td><td><pre></pre></td></tr><tr><td data-num=\"332\"></td><td><pre><span class=\"token variable\">$config</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'script_version'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'2.0.2'</span><span class=\"token punctuation\">;</span></span></pre></td></tr></table></figure><ol start=\"7\">\n<li>开启服务器，浏览网站，查看是否可以注册</li>\n</ol>\n<h2 id=\"第六步\"><a class=\"anchor\" href=\"#第六步\">#</a> 第六步</h2>\n<p>进入 \\dengluqi\\ 文件夹，修改登录器.bat 中或者 realmlist.WTF 中的 IP 地址。</p>\n<p>将整个 dengluqi 文件夹复制进 335 根目录内即可。</p>\n<h2 id=\"至此大功告成\"><a class=\"anchor\" href=\"#至此大功告成\">#</a> 至此大功告成。</h2>\n",
            "tags": [
                "从零开始私服搭建",
                "私服搭建"
            ]
        }
    ]
}